<!-- ============================================
     M√ìDULO: INVENTARIO Y EQUIPAMIENTO
     Sistema CattleSIS - Gesti√≥n Ganadera
============================================ -->

<style>
    .inventory-container {
        max-width: 1800px;
        margin: 0 auto;
        animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Header del m√≥dulo */
    .module-header {
        background: var(--gradient-primary);
        color: white;
        padding: 32px;
        border-radius: 16px;
        margin-bottom: 24px;
        box-shadow: var(--shadow-primary);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .header-left h1 {
        font-size: 32px;
        font-weight: 900;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .header-left p {
        opacity: 0.9;
        font-size: 15px;
    }

    .header-stats {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 20px;
        margin-top: 24px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
    }

    .stat-value {
        font-size: 36px;
        font-weight: 900;
        margin-bottom: 4px;
    }

    .stat-label {
        font-size: 13px;
        opacity: 0.9;
    }

    /* Tabs */
    .tabs-container {
        background: white;
        border-radius: 16px;
        padding: 20px 24px 0;
        margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .tabs {
        display: flex;
        gap: 8px;
        border-bottom: 2px solid #F3F4F6;
        overflow-x: auto;
    }

    .tab {
        padding: 12px 24px;
        border: none;
        background: none;
        font-size: 14px;
        font-weight: 600;
        color: #6B7280;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        margin-bottom: -2px;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .tab:hover {
        color: var(--color-primary);
    }

    .tab.active {
        color: var(--color-primary);
        border-bottom-color: var(--color-primary);
    }

    /* Toolbar */
    .toolbar {
        background: white;
        padding: 24px;
        border-radius: 16px;
        margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .toolbar-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .search-box {
        flex: 1;
        max-width: 400px;
        position: relative;
    }

    .search-box input {
        width: 100%;
        padding: 12px 16px 12px 44px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    .search-box input:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 4px var(--color-primary-very-light);
    }

    .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        color: #9CA3AF;
    }

    .btn-primary {
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-primary);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-primary-hover);
    }

    .filters {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
    }

    .filter-group {
        flex: 1;
        min-width: 200px;
    }

    .filter-label {
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        margin-bottom: 6px;
        display: block;
        text-transform: uppercase;
    }

    .filter-select {
        width: 100%;
        padding: 10px 14px;
        border: 2px solid #E5E7EB;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        color: #1F2937;
        cursor: pointer;
        transition: all 0.2s ease;
        background: white;
    }

    .filter-select:focus {
        outline: none;
        border-color: var(--color-primary);
    }

    /* Grid de tarjetas */
    .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 20px;
        margin-bottom: 24px;
    }

    .inventory-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        border-left: 4px solid;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .inventory-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    }

    .inventory-card.equipo {
        border-color: var(--color-primary);
    }

    .inventory-card.medicamento {
        border-color: #10B981;
    }

    .inventory-card.herramienta {
        border-color: #F59E0B;
    }

    .inventory-card.insumo {
        border-color: #8B5CF6;
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
    }

    .card-title {
        font-size: 18px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .card-badge {
        font-size: 13px;
        font-weight: 700;
        padding: 6px 12px;
        border-radius: 6px;
    }

    .card-badge.operativo {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .card-badge.mantenimiento {
        background: var(--color-warning-light);
        color: var(--color-warning);
    }

    .card-badge.inactivo {
        background: rgba(107, 114, 128, 0.1);
        color: #6B7280;
    }

    .card-badge.disponible {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .card-badge.bajo {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    .card-body {
        margin-bottom: 16px;
    }

    .card-info {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 12px;
    }

    .card-info-item {
        font-size: 13px;
        color: #6B7280;
    }

    .card-info-item strong {
        color: #1F2937;
        font-weight: 700;
    }

    .card-footer {
        display: flex;
        gap: 8px;
        padding-top: 16px;
        border-top: 2px solid #F3F4F6;
    }

    /* Tabla */
    .table-container {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
    }

    .table-wrapper {
        overflow-x: auto;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
    }

    .data-table thead {
        background: #F9FAFB;
    }

    .data-table th {
        padding: 16px;
        text-align: left;
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 2px solid #E5E7EB;
    }

    .data-table td {
        padding: 16px;
        border-bottom: 1px solid #F3F4F6;
        font-size: 14px;
        color: #1F2937;
    }

    .data-table tbody tr {
        transition: all 0.2s ease;
    }

    .data-table tbody tr:hover {
        background: #F9FAFB;
    }

    /* Badges */
    .badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
    }

    .badge.operativo {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.mantenimiento {
        background: var(--color-warning-light);
        color: var(--color-warning);
    }

    .badge.inactivo {
        background: rgba(107, 114, 128, 0.1);
        color: #6B7280;
    }

    .badge.disponible {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.bajo {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    .badge.programado {
        background: rgba(59, 130, 246, 0.1);
        color: #2563EB;
    }

    .badge.realizado {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.entrada {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.salida {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    /* Botones de acci√≥n */
    .action-buttons {
        display: flex;
        gap: 8px;
    }

    .btn-action {
        width: 32px;
        height: 32px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        transition: all 0.2s ease;
    }

    .btn-view {
        background: rgba(59, 130, 246, 0.1);
        color: #2563EB;
    }

    .btn-view:hover {
        background: #2563EB;
        color: white;
    }

    .btn-edit {
        background: rgba(245, 158, 11, 0.1);
        color: #D97706;
    }

    .btn-edit:hover {
        background: #F59E0B;
        color: white;
    }

    .btn-delete {
        background: rgba(239, 68, 68, 0.1);
        color: #DC2626;
    }

    .btn-delete:hover {
        background: #EF4444;
        color: white;
    }

    .btn-maintenance {
        background: rgba(245, 158, 11, 0.1);
        color: #F59E0B;
    }

    .btn-maintenance:hover {
        background: #F59E0B;
        color: white;
    }

    /* Modal */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 9999;
        animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .modal-content {
        background: white;
        border-radius: 20px;
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-header {
        padding: 24px;
        border-bottom: 2px solid #F3F4F6;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-title {
        font-size: 24px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .btn-close {
        width: 36px;
        height: 36px;
        border: none;
        background: #F3F4F6;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
        color: #6B7280;
        transition: all 0.2s ease;
    }

    .btn-close:hover {
        background: #E5E7EB;
        color: #1F2937;
    }

    .modal-body {
        padding: 24px;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    .form-label {
        font-size: 13px;
        font-weight: 700;
        color: #374151;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .form-label .required {
        color: #EF4444;
    }

    .form-input {
        padding: 12px 16px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        color: #1F2937;
        transition: all 0.3s ease;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 4px var(--color-primary-very-light);
    }

    .form-select {
        padding: 12px 16px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        color: #1F2937;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
    }

    .form-select:focus {
        outline: none;
        border-color: var(--color-primary);
    }

    .modal-footer {
        padding: 20px 24px;
        border-top: 2px solid #F3F4F6;
        display: flex;
        justify-content: flex-end;
        gap: 12px;
    }

    .btn-secondary {
        padding: 12px 24px;
        border: 2px solid #E5E7EB;
        background: white;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        color: #6B7280;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-secondary:hover {
        border-color: #D1D5DB;
        background: #F9FAFB;
    }

    .btn-save {
        padding: 12px 32px;
        background: var(--gradient-primary);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-primary);
    }

    .btn-save:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-primary-hover);
    }

    /* Detalles */
    .detail-section {
        margin-bottom: 24px;
    }

    .detail-section-title {
        font-size: 16px;
        font-weight: 700;
        color: #1F2937;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid #F3F4F6;
    }

    .detail-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }

    .detail-item {
        display: flex;
        flex-direction: column;
    }

    .detail-label {
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        text-transform: uppercase;
        margin-bottom: 6px;
    }

    .detail-value {
        font-size: 15px;
        font-weight: 600;
        color: #1F2937;
    }

    /* Alertas */
    .alert-section {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
    }

    .alert-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 2px solid #F3F4F6;
    }

    .alert-title {
        font-size: 20px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .alert-item {
        display: flex;
        gap: 14px;
        padding: 16px;
        border-radius: 12px;
        margin-bottom: 12px;
        border-left: 4px solid;
        transition: all 0.2s ease;
    }

    .alert-item:hover {
        transform: translateX(4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .alert-item.urgente {
        background: #FEF2F2;
        border-color: #EF4444;
    }

    .alert-item.advertencia {
        background: #FFFBEB;
        border-color: #F59E0B;
    }

    .alert-item.info {
        background: #EFF6FF;
        border-color: #3B82F6;
    }

    .alert-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        flex-shrink: 0;
    }

    .alert-content {
        flex: 1;
    }

    .alert-content-title {
        font-size: 15px;
        font-weight: 700;
        color: #1F2937;
        margin-bottom: 4px;
    }

    .alert-desc {
        font-size: 13px;
        color: #6B7280;
        line-height: 1.5;
    }

    /* Quick actions */
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
    }

    .quick-action-btn {
        padding: 20px;
        background: white;
        border: 2px solid #E5E7EB;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }

    .quick-action-btn:hover {
        border-color: var(--color-primary);
        background: var(--color-primary-very-light);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .quick-action-icon {
        font-size: 32px;
        margin-bottom: 8px;
    }

    .quick-action-label {
        font-size: 14px;
        font-weight: 700;
        color: #1F2937;
    }

    /* Progress bar */
    .progress-bar {
        width: 100%;
        height: 8px;
        background: #E5E7EB;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 8px;
    }

    .progress-fill {
        height: 100%;
        border-radius: 4px;
        transition: width 0.3s ease;
    }

    .progress-fill.alto {
        background: var(--color-success);
    }

    .progress-fill.medio {
        background: var(--color-warning);
    }

    .progress-fill.bajo {
        background: #EF4444;
    }

    /* Responsive */
    @media (max-width: 1400px) {
        .header-stats {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 1024px) {
        .header-stats {
            grid-template-columns: repeat(2, 1fr);
        }

        .cards-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .detail-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .header-content {
            flex-direction: column;
            gap: 16px;
            text-align: center;
        }

        .toolbar-top {
            flex-direction: column;
            gap: 16px;
        }

        .search-box {
            max-width: 100%;
        }

        .filters {
            flex-direction: column;
        }

        .cards-grid {
            grid-template-columns: 1fr;
        }

        .header-stats {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="inventory-container">
    <!-- Header del m√≥dulo -->
    <div class="module-header">
        <div class="header-content">
            <div class="header-left">
                <h1>üì¶ Inventario y Equipamiento</h1>
                <p>Control completo de equipos, herramientas, medicamentos e insumos</p>
            </div>
        </div>
        
        <div class="header-stats">
            <div class="stat-card">
                <div class="stat-value">18</div>
                <div class="stat-label">Equipos</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">45</div>
                <div class="stat-label">Herramientas</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">32</div>
                <div class="stat-label">Medicamentos</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3</div>
                <div class="stat-label">Mantenimientos Pendientes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">5</div>
                <div class="stat-label">Stock Bajo</div>
            </div>
        </div>
    </div>

    <!-- Alertas de Inventario -->
    <div class="alert-section">
        <div class="alert-header">
            <div class="alert-title">‚ö†Ô∏è Alertas de Inventario</div>
        </div>

        <div class="alert-item urgente">
            <div class="alert-icon" style="background: #FEE2E2; color: #EF4444;">üîß</div>
            <div class="alert-content">
                <div class="alert-content-title">Mantenimiento Vencido - Tractor John Deere</div>
                <div class="alert-desc">Mantenimiento programado para hace 5 d√≠as - Contactar t√©cnico urgente</div>
            </div>
        </div>

        <div class="alert-item advertencia">
            <div class="alert-icon" style="background: #FEF3C7; color: #F59E0B;">üíä</div>
            <div class="alert-content">
                <div class="alert-content-title">Stock Bajo - Antibi√≥tico Terramicina</div>
                <div class="alert-desc">Solo 3 frascos disponibles - Realizar pedido</div>
            </div>
        </div>

        <div class="alert-item info">
            <div class="alert-icon" style="background: #DBEAFE; color: #3B82F6;">üìÖ</div>
            <div class="alert-content">
                <div class="alert-content-title">Mantenimientos Pr√≥ximos - Esta Semana</div>
                <div class="alert-desc">2 equipos requieren mantenimiento: Orde√±adora mec√°nica (20/10), Tanque enfriador (22/10)</div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="quick-action-btn" onclick="openEquipoModal()">
            <div class="quick-action-icon">üöú</div>
            <div class="quick-action-label">Nuevo Equipo</div>
        </button>
        <button class="quick-action-btn" onclick="openMedicamentoModal()">
            <div class="quick-action-icon">üíä</div>
            <div class="quick-action-label">Nuevo Medicamento</div>
        </button>
        <button class="quick-action-btn" onclick="showTab('mantenimientos')">
            <div class="quick-action-icon">üîß</div>
            <div class="quick-action-label">Mantenimientos</div>
        </button>
        <button class="quick-action-btn" onclick="showTab('movimientos')">
            <div class="quick-action-icon">üìä</div>
            <div class="quick-action-label">Movimientos</div>
        </button>
    </div>

    <!-- Tabs de navegaci√≥n -->
    <div class="tabs-container">
        <div class="tabs">
            <button class="tab active" data-tab="equipos">üöú Equipos</button>
            <button class="tab" data-tab="herramientas">üî® Herramientas</button>
            <button class="tab" data-tab="medicamentos">üíä Medicamentos</button>
            <button class="tab" data-tab="mantenimientos">üîß Mantenimientos</button>
            <button class="tab" data-tab="movimientos">üìä Movimientos</button>
        </div>
    </div>

    <!-- TAB: EQUIPOS -->
    <div id="equiposContent">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchEquipos" placeholder="Buscar equipo...">
                </div>
                <button class="btn-primary" id="btnAddEquipo">
                    <span>‚ûï</span> Agregar Equipo
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="filter-select" id="filterEstadoEquipo">
                        <option value="">Todos</option>
                        <option value="Operativo">Operativo</option>
                        <option value="Mantenimiento">En Mantenimiento</option>
                        <option value="Inactivo">Inactivo</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Tipo</label>
                    <select class="filter-select" id="filterTipoEquipo">
                        <option value="">Todos</option>
                        <option value="Maquinaria">Maquinaria</option>
                        <option value="Orde√±o">Equipo de Orde√±o</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="cards-grid" id="equiposGrid">
            <!-- Los equipos se cargan con JavaScript -->
        </div>
    </div>

    <!-- TAB: HERRAMIENTAS -->
    <div id="herramientasContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchHerramientas" placeholder="Buscar herramienta...">
                </div>
                <button class="btn-primary" id="btnAddHerramienta">
                    <span>‚ûï</span> Agregar Herramienta
                </button>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Categor√≠a</th>
                            <th>Cantidad</th>
                            <th>Ubicaci√≥n</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="herramientasTableBody">
                        <!-- Las herramientas se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: MEDICAMENTOS -->
    <div id="medicamentosContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchMedicamentos" placeholder="Buscar medicamento...">
                </div>
                <button class="btn-primary" id="btnAddMedicamento">
                    <span>‚ûï</span> Agregar Medicamento
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Categor√≠a</label>
                    <select class="filter-select" id="filterCategoriaMed">
                        <option value="">Todas</option>
                        <option value="Antibi√≥tico">Antibi√≥ticos</option>
                        <option value="Antiparasitario">Antiparasitarios</option>
                        <option value="Vacuna">Vacunas</option>
                        <option value="Vitamina">Vitaminas</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Stock</label>
                    <select class="filter-select" id="filterStockMed">
                        <option value="">Todos</option>
                        <option value="Alto">Alto</option>
                        <option value="Medio">Medio</option>
                        <option value="Bajo">Bajo</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="cards-grid" id="medicamentosGrid">
            <!-- Los medicamentos se cargan con JavaScript -->
        </div>
    </div>

    <!-- TAB: MANTENIMIENTOS -->
    <div id="mantenimientosContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchMantenimientos" placeholder="Buscar mantenimiento...">
                </div>
                <button class="btn-primary" id="btnAddMantenimiento">
                    <span>‚ûï</span> Programar Mantenimiento
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="filter-select" id="filterEstadoMant">
                        <option value="">Todos</option>
                        <option value="Programado">Programado</option>
                        <option value="Realizado">Realizado</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Equipo</th>
                            <th>Tipo de Mantenimiento</th>
                            <th>Fecha Programada</th>
                            <th>T√©cnico</th>
                            <th>Costo</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="mantenimientosTableBody">
                        <!-- Los mantenimientos se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: MOVIMIENTOS -->
    <div id="movimientosContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchMovimientos" placeholder="Buscar movimiento...">
                </div>
                <button class="btn-primary" id="btnAddMovimiento">
                    <span>‚ûï</span> Registrar Movimiento
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Tipo</label>
                    <select class="filter-select" id="filterTipoMov">
                        <option value="">Todos</option>
                        <option value="Entrada">Entrada</option>
                        <option value="Salida">Salida</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Fecha</label>
                    <input type="date" class="filter-select" id="filterFechaMov">
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Item</th>
                            <th>Tipo</th>
                            <th>Cantidad</th>
                            <th>Responsable</th>
                            <th>Observaciones</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="movimientosTableBody">
                        <!-- Los movimientos se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Agregar/Editar Equipo -->
<div class="modal-overlay" id="modalEquipo">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalEquipoTitle">
                <span>üöú</span> Agregar Equipo
            </h2>
            <button class="btn-close" onclick="closeEquipoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="equipoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Nombre del Equipo <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="equipoNombre" placeholder="Ej: Tractor John Deere 5075E" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Tipo <span class="required">*</span>
                        </label>
                        <select class="form-select" id="equipoTipo" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="Maquinaria">Maquinaria</option>
                            <option value="Orde√±o">Equipo de Orde√±o</option>
                            <option value="Almacenamiento">Almacenamiento</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Marca</label>
                        <input type="text" class="form-input" id="equipoMarca" placeholder="Ej: John Deere">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Modelo</label>
                        <input type="text" class="form-input" id="equipoModelo" placeholder="Ej: 5075E">
                    </div>

                    <div class="form-group">
                        <label class="form-label">A√±o de Adquisici√≥n</label>
                        <input type="number" class="form-input" id="equipoAnio" placeholder="Ej: 2020" min="1900" max="2100">
                    </div>

                    <div class="form-group">
                        <label class="form-label">N√∫mero de Serie</label>
                        <input type="text" class="form-input" id="equipoSerie" placeholder="Ej: JD5075E-2020-001">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="equipoEstado" required>
                            <option value="Operativo">Operativo</option>
                            <option value="Mantenimiento">En Mantenimiento</option>
                            <option value="Inactivo">Inactivo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Ubicaci√≥n</label>
                        <input type="text" class="form-input" id="equipoUbicacion" placeholder="Ej: Galp√≥n principal">
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="equipoObservaciones" rows="3" placeholder="Notas adicionales sobre el equipo..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeEquipoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveEquipo()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Agregar/Editar Herramienta -->
<div class="modal-overlay" id="modalHerramienta">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalHerramientaTitle">
                <span>üî®</span> Agregar Herramienta
            </h2>
            <button class="btn-close" onclick="closeHerramientaModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="herramientaForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Nombre <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="herramientaNombre" placeholder="Ej: Martillo de carpintero" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Categor√≠a <span class="required">*</span>
                        </label>
                        <select class="form-select" id="herramientaCategoria" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Mano">Herramienta de Mano</option>
                            <option value="El√©ctrica">Herramienta El√©ctrica</option>
                            <option value="Medici√≥n">Medici√≥n</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Cantidad <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="herramientaCantidad" placeholder="Ej: 5" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Ubicaci√≥n</label>
                        <input type="text" class="form-input" id="herramientaUbicacion" placeholder="Ej: Taller">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="herramientaEstado" required>
                            <option value="Disponible">Disponible</option>
                            <option value="En Uso">En Uso</option>
                            <option value="Mantenimiento">En Mantenimiento</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="herramientaObservaciones" rows="3" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeHerramientaModal()">Cancelar</button>
            <button class="btn-save" onclick="saveHerramienta()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Agregar/Editar Medicamento -->
<div class="modal-overlay" id="modalMedicamento">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalMedicamentoTitle">
                <span>üíä</span> Agregar Medicamento
            </h2>
            <button class="btn-close" onclick="closeMedicamentoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="medicamentoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Nombre del Medicamento <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="medicamentoNombre" placeholder="Ej: Terramicina LA" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Categor√≠a <span class="required">*</span>
                        </label>
                        <select class="form-select" id="medicamentoCategoria" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Antibi√≥tico">Antibi√≥tico</option>
                            <option value="Antiparasitario">Antiparasitario</option>
                            <option value="Vacuna">Vacuna</option>
                            <option value="Vitamina">Vitamina/Suplemento</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Stock Actual <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="medicamentoStock" placeholder="Ej: 15" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Stock M√≠nimo <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="medicamentoStockMin" placeholder="Ej: 5" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Unidad</label>
                        <select class="form-select" id="medicamentoUnidad">
                            <option value="Frasco">Frascos</option>
                            <option value="Caja">Cajas</option>
                            <option value="Dosis">Dosis</option>
                            <option value="Unidad">Unidades</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Fecha de Vencimiento</label>
                        <input type="date" class="form-input" id="medicamentoVencimiento">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lote</label>
                        <input type="text" class="form-input" id="medicamentoLote" placeholder="Ej: LOT-2024-001">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Proveedor</label>
                        <input type="text" class="form-input" id="medicamentoProveedor" placeholder="Ej: Vetfarma S.A.">
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="medicamentoObservaciones" rows="3" placeholder="Instrucciones de uso, precauciones..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeMedicamentoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveMedicamento()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Programar Mantenimiento -->
<div class="modal-overlay" id="modalMantenimiento">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalMantenimientoTitle">
                <span>üîß</span> Programar Mantenimiento
            </h2>
            <button class="btn-close" onclick="closeMantenimientoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="mantenimientoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Equipo <span class="required">*</span>
                        </label>
                        <select class="form-select" id="mantenimientoEquipo" required>
                            <option value="">Seleccionar equipo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Tipo de Mantenimiento <span class="required">*</span>
                        </label>
                        <select class="form-select" id="mantenimientoTipo" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="Preventivo">Preventivo</option>
                            <option value="Correctivo">Correctivo</option>
                            <option value="Revisi√≥n">Revisi√≥n General</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Fecha Programada <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="mantenimientoFecha" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">T√©cnico</label>
                        <input type="text" class="form-input" id="mantenimientoTecnico" placeholder="Nombre del t√©cnico">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Costo Estimado ($)</label>
                        <input type="number" class="form-input" id="mantenimientoCosto" placeholder="Ej: 250.00" step="0.01" min="0">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="mantenimientoEstado" required>
                            <option value="Programado">Programado</option>
                            <option value="Realizado">Realizado</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Descripci√≥n/Observaciones</label>
                        <textarea class="form-input" id="mantenimientoObservaciones" rows="3" placeholder="Detalles del mantenimiento..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeMantenimientoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveMantenimiento()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Registrar Movimiento -->
<div class="modal-overlay" id="modalMovimiento">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalMovimientoTitle">
                <span>üìä</span> Registrar Movimiento
            </h2>
            <button class="btn-close" onclick="closeMovimientoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="movimientoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Fecha <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="movimientoFecha" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Tipo de Movimiento <span class="required">*</span>
                        </label>
                        <select class="form-select" id="movimientoTipo" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="Entrada">Entrada</option>
                            <option value="Salida">Salida</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            Item <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="movimientoItem" placeholder="Nombre del item" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Cantidad <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="movimientoCantidad" placeholder="Ej: 10" min="0" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Unidad</label>
                        <input type="text" class="form-input" id="movimientoUnidad" placeholder="Ej: Kg, Litros, Unidades">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Responsable</label>
                        <input type="text" class="form-input" id="movimientoResponsable" placeholder="Nombre del responsable">
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="movimientoObservaciones" rows="3" placeholder="Motivo del movimiento, destino..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeMovimientoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveMovimiento()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Ver Detalles -->
<div class="modal-overlay" id="modalDetails">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">
                <span>üìã</span> Detalles
            </h2>
            <button class="btn-close" onclick="closeDetailsModal()">‚úñ</button>
        </div>

        <div class="modal-body" id="detailsContent">
            <!-- Los detalles se cargan con JavaScript -->
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeDetailsModal()">Cerrar</button>
        </div>
    </div>
</div>

<script>
// ============================================
// DATOS DE EJEMPLO
// ============================================

let equiposData = [
    { id: 'EQ001', nombre: 'Tractor John Deere 5075E', tipo: 'Maquinaria', marca: 'John Deere', modelo: '5075E', anio: 2020, serie: 'JD5075E-2020-001', estado: 'Operativo', ubicacion: 'Galp√≥n Principal', observaciones: 'Mantenimiento cada 200 horas' },
    { id: 'EQ002', nombre: 'Orde√±adora Mec√°nica DeLaval', tipo: 'Orde√±o', marca: 'DeLaval', modelo: 'MM27', anio: 2019, serie: 'DL-MM27-2019', estado: 'Operativo', ubicacion: 'Sala de Orde√±o', observaciones: '' },
    { id: 'EQ003', nombre: 'Tanque Enfriador 500L', tipo: 'Almacenamiento', marca: 'Mueller', modelo: 'O-500', anio: 2021, serie: 'MU-O500-2021', estado: 'Operativo', ubicacion: 'Sala de Enfriado', observaciones: 'Limpieza diaria' },
    { id: 'EQ004', nombre: 'Picadora de Forraje', tipo: 'Maquinaria', marca: 'Trapp', modelo: 'TRF-400', anio: 2018, serie: 'TRF400-2018', estado: 'Mantenimiento', ubicacion: 'Galp√≥n 2', observaciones: 'En mantenimiento preventivo' },
    { id: 'EQ005', nombre: 'Bomba de Agua El√©ctrica', tipo: 'Otro', marca: 'Pedrollo', modelo: 'CPM 158', anio: 2022, serie: 'PD-CPM158-2022', estado: 'Operativo', ubicacion: 'Pozo Principal', observaciones: '' },
];

let herramientasData = [
    { id: 'H001', nombre: 'Martillo de carpintero', categoria: 'Mano', cantidad: 8, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
    { id: 'H002', nombre: 'Destornillador Phillips', categoria: 'Mano', cantidad: 12, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
    { id: 'H003', nombre: 'Taladro el√©ctrico', categoria: 'El√©ctrica', cantidad: 3, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
    { id: 'H004', nombre: 'Sierra circular', categoria: 'El√©ctrica', cantidad: 2, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
    { id: 'H005', nombre: 'Cinta m√©trica 5m', categoria: 'Medici√≥n', cantidad: 5, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
    { id: 'H006', nombre: 'Llave inglesa ajustable', categoria: 'Mano', cantidad: 6, ubicacion: 'Taller', estado: 'Disponible', observaciones: '' },
];

let medicamentosData = [
    { id: 'M001', nombre: 'Terramicina LA', categoria: 'Antibi√≥tico', stock: 3, stockMin: 10, unidad: 'Frasco', vencimiento: '2025-12-15', lote: 'LOT-2024-001', proveedor: 'Vetfarma S.A.', stockEstado: 'Bajo', observaciones: 'Uso veterinario exclusivo' },
    { id: 'M002', nombre: 'Ivermectina 1%', categoria: 'Antiparasitario', stock: 25, stockMin: 10, unidad: 'Frasco', vencimiento: '2026-03-20', lote: 'LOT-2024-015', proveedor: 'Agroveterinaria Central', stockEstado: 'Alto', observaciones: '' },
    { id: 'M003', nombre: 'Vacuna Triple Bovina', categoria: 'Vacuna', stock: 50, stockMin: 20, unidad: 'Dosis', vencimiento: '2025-11-30', lote: 'VAC-2024-008', proveedor: 'Biog√©nesis Bag√≥', stockEstado: 'Alto', observaciones: 'Mantener refrigerado' },
    { id: 'M004', nombre: 'Complejo B inyectable', categoria: 'Vitamina', stock: 8, stockMin: 15, unidad: 'Frasco', vencimiento: '2026-01-10', lote: 'VIT-2024-022', proveedor: 'Vetfarma S.A.', stockEstado: 'Bajo', observaciones: '' },
    { id: 'M005', nombre: 'Oxitetraciclina', categoria: 'Antibi√≥tico', stock: 18, stockMin: 10, unidad: 'Frasco', vencimiento: '2025-10-25', lote: 'LOT-2024-033', proveedor: 'Agroveterinaria Central', stockEstado: 'Medio', observaciones: '' },
];

let mantenimientosData = [
    { id: 'MNT001', equipo: 'Tractor John Deere 5075E', tipo: 'Preventivo', fechaProgramada: '2025-10-12', tecnico: 'Taller Mec√°nico L√≥pez', costo: 280, estado: 'Realizado', observaciones: 'Cambio de aceite y filtros' },
    { id: 'MNT002', equipo: 'Orde√±adora Mec√°nica DeLaval', tipo: 'Preventivo', fechaProgramada: '2025-10-20', tecnico: 'T√©cnico DeLaval', costo: 450, estado: 'Programado', observaciones: 'Revisi√≥n general anual' },
    { id: 'MNT003', equipo: 'Tanque Enfriador 500L', tipo: 'Preventivo', fechaProgramada: '2025-10-22', tecnico: 'Servicio T√©cnico Mueller', costo: 320, estado: 'Programado', observaciones: 'Limpieza profunda y calibraci√≥n' },
    { id: 'MNT004', equipo: 'Picadora de Forraje', tipo: 'Correctivo', fechaProgramada: '2025-10-18', tecnico: 'Taller Mec√°nico L√≥pez', costo: 180, estado: 'Programado', observaciones: 'Reparaci√≥n de cuchillas' },
];

let movimientosData = [
    { id: 'MOV001', fecha: '2025-10-15', item: 'Terramicina LA', tipo: 'Entrada', cantidad: 15, unidad: 'Frascos', responsable: 'Dr. Ram√≠rez', observaciones: 'Compra a Vetfarma S.A.' },
    { id: 'MOV002', fecha: '2025-10-14', item: 'Ivermectina 1%', tipo: 'Salida', cantidad: 3, unidad: 'Frascos', responsable: 'Dr. Ram√≠rez', observaciones: 'Desparasitaci√≥n grupo A' },
    { id: 'MOV003', fecha: '2025-10-12', item: 'Vacuna Triple Bovina', tipo: 'Salida', cantidad: 28, unidad: 'Dosis', responsable: 'Dr. Ram√≠rez', observaciones: 'Vacunaci√≥n de terneros' },
    { id: 'MOV004', fecha: '2025-10-10', item: 'Complejo B inyectable', tipo: 'Entrada', cantidad: 10, unidad: 'Frascos', responsable: 'Juan P√©rez', observaciones: 'Reposici√≥n de stock' },
    { id: 'MOV005', fecha: '2025-10-08', item: 'Oxitetraciclina', tipo: 'Salida', cantidad: 2, unidad: 'Frascos', responsable: 'Dr. Ram√≠rez', observaciones: 'Tratamiento mastitis' },
];

let currentItemId = null;

// ============================================
// TABS
// ============================================
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
        showTab(this.dataset.tab);
    });
});

function showTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
    
    // Ocultar todos
    document.getElementById('equiposContent').style.display = 'none';
    document.getElementById('herramientasContent').style.display = 'none';
    document.getElementById('medicamentosContent').style.display = 'none';
    document.getElementById('mantenimientosContent').style.display = 'none';
    document.getElementById('movimientosContent').style.display = 'none';
    
    // Mostrar el activo
    if (tabName === 'equipos') {
        document.getElementById('equiposContent').style.display = 'block';
        renderEquipos();
    } else if (tabName === 'herramientas') {
        document.getElementById('herramientasContent').style.display = 'block';
        renderHerramientas();
    } else if (tabName === 'medicamentos') {
        document.getElementById('medicamentosContent').style.display = 'block';
        renderMedicamentos();
    } else if (tabName === 'mantenimientos') {
        document.getElementById('mantenimientosContent').style.display = 'block';
        renderMantenimientos();
    } else if (tabName === 'movimientos') {
        document.getElementById('movimientosContent').style.display = 'block';
        renderMovimientos();
    }
}

// ============================================
// RENDERIZAR EQUIPOS
// ============================================
function renderEquipos() {
    const grid = document.getElementById('equiposGrid');
    
    if (equiposData.length === 0) {
        grid.innerHTML = '<p style="text-align:center; color:#6B7280; padding:40px; grid-column: 1/-1;">No hay equipos registrados</p>';
        return;
    }
    
    grid.innerHTML = equiposData.map(eq => `
        <div class="inventory-card equipo" onclick="viewDetails('equipo', '${eq.id}')">
            <div class="card-header">
                <div class="card-title">
                    üöú ${eq.nombre}
                </div>
                <div class="card-badge ${eq.estado.toLowerCase().replace(' ', '')}">${eq.estado}</div>
            </div>
            <div class="card-body">
                <div class="card-info">
                    <div class="card-info-item">
                        <strong>Tipo:</strong> ${eq.tipo}
                    </div>
                    <div class="card-info-item">
                        <strong>Marca:</strong> ${eq.marca}
                    </div>
                    <div class="card-info-item">
                        <strong>Modelo:</strong> ${eq.modelo}
                    </div>
                    <div class="card-info-item">
                        <strong>A√±o:</strong> ${eq.anio}
                    </div>
                    <div class="card-info-item" style="grid-column: 1/-1;">
                        <strong>Ubicaci√≥n:</strong> ${eq.ubicacion}
                    </div>
                </div>
            </div>
            <div class="card-footer" onclick="event.stopPropagation()">
                <button class="btn-action btn-maintenance" onclick="openMantenimientoModalForEquipo('${eq.id}')" title="Programar Mantenimiento">üîß</button>
                <button class="btn-action btn-edit" onclick="editEquipo('${eq.id}')" title="Editar">‚úèÔ∏è</button>
                <button class="btn-action btn-delete" onclick="deleteEquipo('${eq.id}')" title="Eliminar">üóëÔ∏è</button>
            </div>
        </div>
    `).join('');
}

// ============================================
// RENDERIZAR HERRAMIENTAS
// ============================================
function renderHerramientas() {
    const tbody = document.getElementById('herramientasTableBody');
    
    if (herramientasData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" style="text-align:center; color:#6B7280; padding:40px;">No hay herramientas registradas</td></tr>';
        return;
    }
    
    tbody.innerHTML = herramientasData.map(her => `
        <tr>
            <td><strong>${her.nombre}</strong></td>
            <td>${her.categoria}</td>
            <td>${her.cantidad}</td>
            <td>${her.ubicacion}</td>
            <td><span class="badge ${her.estado.toLowerCase().replace(' ', '')}">${her.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('herramienta', '${her.id}')" title="Ver">üëÅÔ∏è</button>
                    <button class="btn-action btn-edit" onclick="editHerramienta('${her.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteHerramienta('${her.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// RENDERIZAR MEDICAMENTOS
// ============================================
function renderMedicamentos() {
    const grid = document.getElementById('medicamentosGrid');
    
    if (medicamentosData.length === 0) {
        grid.innerHTML = '<p style="text-align:center; color:#6B7280; padding:40px; grid-column: 1/-1;">No hay medicamentos registrados</p>';
        return;
    }
    
    grid.innerHTML = medicamentosData.map(med => {
        const porcentajeStock = (med.stock / med.stockMin) * 100;
        let stockEstado = 'alto';
        let stockTexto = 'Stock Alto';
        
        if (porcentajeStock < 50) {
            stockEstado = 'bajo';
            stockTexto = 'Stock Bajo';
        } else if (porcentajeStock < 100) {
            stockEstado = 'medio';
            stockTexto = 'Stock Medio';
        }
        
        return `
            <div class="inventory-card medicamento" onclick="viewDetails('medicamento', '${med.id}')">
                <div class="card-header">
                    <div class="card-title">
                        üíä ${med.nombre}
                    </div>
                    <div class="card-badge ${stockEstado}">${stockTexto}</div>
                </div>
                <div class="card-body">
                    <div style="margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span style="font-size: 14px; color: #6B7280;">Stock Actual</span>
                            <span style="font-size: 16px; font-weight: 700;">${med.stock} ${med.unidad}</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill ${stockEstado}" style="width: ${Math.min(porcentajeStock, 100)}%"></div>
                        </div>
                        <div style="font-size: 12px; color: #9CA3AF; margin-top: 4px;">M√≠nimo: ${med.stockMin} ${med.unidad}</div>
                    </div>
                    
                    <div class="card-info">
                        <div class="card-info-item">
                            <strong>Categor√≠a:</strong> ${med.categoria}
                        </div>
                        <div class="card-info-item">
                            <strong>Lote:</strong> ${med.lote}
                        </div>
                        <div class="card-info-item" style="grid-column: 1/-1;">
                            <strong>Vence:</strong> ${new Date(med.vencimiento).toLocaleDateString('es-ES')}
                        </div>
                    </div>
                </div>
                <div class="card-footer" onclick="event.stopPropagation()">
                    <button class="btn-action btn-edit" onclick="editMedicamento('${med.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteMedicamento('${med.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </div>
        `;
    }).join('');
}

// ============================================
// RENDERIZAR MANTENIMIENTOS
// ============================================
function renderMantenimientos() {
    const tbody = document.getElementById('mantenimientosTableBody');
    
    if (mantenimientosData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay mantenimientos registrados</td></tr>';
        return;
    }
    
    tbody.innerHTML = mantenimientosData.map(mnt => `
        <tr>
            <td><strong>${mnt.equipo}</strong></td>
            <td>${mnt.tipo}</td>
            <td>${new Date(mnt.fechaProgramada).toLocaleDateString('es-ES')}</td>
            <td>${mnt.tecnico}</td>
            <td>$${mnt.costo.toFixed(2)}</td>
            <td><span class="badge ${mnt.estado.toLowerCase()}">${mnt.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('mantenimiento', '${mnt.id}')" title="Ver">üëÅÔ∏è</button>
                    <button class="btn-action btn-edit" onclick="editMantenimiento('${mnt.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteMantenimiento('${mnt.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// RENDERIZAR MOVIMIENTOS
// ============================================
function renderMovimientos() {
    const tbody = document.getElementById('movimientosTableBody');
    
    if (movimientosData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay movimientos registrados</td></tr>';
        return;
    }
    
    tbody.innerHTML = movimientosData.map(mov => `
        <tr>
            <td>${new Date(mov.fecha).toLocaleDateString('es-ES')}</td>
            <td><strong>${mov.item}</strong></td>
            <td><span class="badge ${mov.tipo.toLowerCase()}">${mov.tipo}</span></td>
            <td>${mov.cantidad} ${mov.unidad}</td>
            <td>${mov.responsable}</td>
            <td>${mov.observaciones || 'N/A'}</td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('movimiento', '${mov.id}')" title="Ver">üëÅÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteMovimiento('${mov.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// MODALES
// ============================================
function openEquipoModal() {
    document.getElementById('modalEquipo').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeEquipoModal() {
    document.getElementById('modalEquipo').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('equipoForm').reset();
    currentItemId = null;
}

function openHerramientaModal() {
    document.getElementById('modalHerramienta').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeHerramientaModal() {
    document.getElementById('modalHerramienta').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('herramientaForm').reset();
    currentItemId = null;
}

function openMedicamentoModal() {
    document.getElementById('modalMedicamento').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeMedicamentoModal() {
    document.getElementById('modalMedicamento').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('medicamentoForm').reset();
    currentItemId = null;
}

function openMantenimientoModal() {
    initializeEquiposSelect();
    document.getElementById('modalMantenimiento').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function openMantenimientoModalForEquipo(equipoId) {
    initializeEquiposSelect();
    document.getElementById('mantenimientoEquipo').value = equiposData.find(e => e.id === equipoId)?.nombre || '';
    openMantenimientoModal();
}

function closeMantenimientoModal() {
    document.getElementById('modalMantenimiento').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('mantenimientoForm').reset();
    currentItemId = null;
}

function openMovimientoModal() {
    document.getElementById('modalMovimiento').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeMovimientoModal() {
    document.getElementById('modalMovimiento').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('movimientoForm').reset();
    currentItemId = null;
}

function closeDetailsModal() {
    document.getElementById('modalDetails').classList.remove('active');
    document.body.style.overflow = 'auto';
}

// ============================================
// INICIALIZAR SELECT DE EQUIPOS
// ============================================
function initializeEquiposSelect() {
    const select = document.getElementById('mantenimientoEquipo');
    if (!select) return;
    
    select.innerHTML = '<option value="">Seleccionar equipo</option>';
    equiposData.forEach(eq => {
        const option = document.createElement('option');
        option.value = eq.nombre;
        option.textContent = eq.nombre;
        select.appendChild(option);
    });
}

// ============================================
// GUARDAR
// ============================================
function saveEquipo() {
    const nombre = document.getElementById('equipoNombre').value;
    const tipo = document.getElementById('equipoTipo').value;
    const marca = document.getElementById('equipoMarca').value;
    const modelo = document.getElementById('equipoModelo').value;
    const anio = document.getElementById('equipoAnio').value;
    const serie = document.getElementById('equipoSerie').value;
    const estado = document.getElementById('equipoEstado').value;
    const ubicacion = document.getElementById('equipoUbicacion').value;
    const observaciones = document.getElementById('equipoObservaciones').value;

    if (!nombre || !tipo || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const equipoItem = {
        nombre,
        tipo,
        marca: marca || 'N/A',
        modelo: modelo || 'N/A',
        anio: anio ? parseInt(anio) : 0,
        serie: serie || 'N/A',
        estado,
        ubicacion: ubicacion || 'N/A',
        observaciones
    };

    if (currentItemId) {
        const index = equiposData.findIndex(e => e.id === currentItemId);
        equiposData[index] = { ...equiposData[index], ...equipoItem };
        alert('‚úÖ Equipo actualizado correctamente');
    } else {
        const newId = 'EQ' + String(equiposData.length + 1).padStart(3, '0');
        equiposData.push({ id: newId, ...equipoItem });
        alert('‚úÖ Equipo agregado correctamente');
    }

    closeEquipoModal();
    renderEquipos();
}

function saveHerramienta() {
    const nombre = document.getElementById('herramientaNombre').value;
    const categoria = document.getElementById('herramientaCategoria').value;
    const cantidad = document.getElementById('herramientaCantidad').value;
    const ubicacion = document.getElementById('herramientaUbicacion').value;
    const estado = document.getElementById('herramientaEstado').value;
    const observaciones = document.getElementById('herramientaObservaciones').value;

    if (!nombre || !categoria || !cantidad || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const herramientaItem = {
        nombre,
        categoria,
        cantidad: parseInt(cantidad),
        ubicacion: ubicacion || 'N/A',
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = herramientasData.findIndex(h => h.id === currentItemId);
        herramientasData[index] = { ...herramientasData[index], ...herramientaItem };
        alert('‚úÖ Herramienta actualizada correctamente');
    } else {
        const newId = 'H' + String(herramientasData.length + 1).padStart(3, '0');
        herramientasData.push({ id: newId, ...herramientaItem });
        alert('‚úÖ Herramienta agregada correctamente');
    }

    closeHerramientaModal();
    renderHerramientas();
}

function saveMedicamento() {
    const nombre = document.getElementById('medicamentoNombre').value;
    const categoria = document.getElementById('medicamentoCategoria').value;
    const stock = document.getElementById('medicamentoStock').value;
    const stockMin = document.getElementById('medicamentoStockMin').value;
    const unidad = document.getElementById('medicamentoUnidad').value;
    const vencimiento = document.getElementById('medicamentoVencimiento').value;
    const lote = document.getElementById('medicamentoLote').value;
    const proveedor = document.getElementById('medicamentoProveedor').value;
    const observaciones = document.getElementById('medicamentoObservaciones').value;

    if (!nombre || !categoria || !stock || !stockMin) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const porcentaje = (parseFloat(stock) / parseFloat(stockMin)) * 100;
    let stockEstado = 'Alto';
    if (porcentaje < 50) stockEstado = 'Bajo';
    else if (porcentaje < 100) stockEstado = 'Medio';

    const medicamentoItem = {
        nombre,
        categoria,
        stock: parseInt(stock),
        stockMin: parseInt(stockMin),
        unidad,
        vencimiento: vencimiento || 'N/A',
        lote: lote || 'N/A',
        proveedor: proveedor || 'N/A',
        stockEstado,
        observaciones
    };

    if (currentItemId) {
        const index = medicamentosData.findIndex(m => m.id === currentItemId);
        medicamentosData[index] = { ...medicamentosData[index], ...medicamentoItem };
        alert('‚úÖ Medicamento actualizado correctamente');
    } else {
        const newId = 'M' + String(medicamentosData.length + 1).padStart(3, '0');
        medicamentosData.push({ id: newId, ...medicamentoItem });
        alert('‚úÖ Medicamento agregado correctamente');
    }

    closeMedicamentoModal();
    renderMedicamentos();
}

function saveMantenimiento() {
    const equipo = document.getElementById('mantenimientoEquipo').value;
    const tipo = document.getElementById('mantenimientoTipo').value;
    const fechaProgramada = document.getElementById('mantenimientoFecha').value;
    const tecnico = document.getElementById('mantenimientoTecnico').value;
    const costo = document.getElementById('mantenimientoCosto').value;
    const estado = document.getElementById('mantenimientoEstado').value;
    const observaciones = document.getElementById('mantenimientoObservaciones').value;

    if (!equipo || !tipo || !fechaProgramada || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const mantenimientoItem = {
        equipo,
        tipo,
        fechaProgramada,
        tecnico: tecnico || 'N/A',
        costo: costo ? parseFloat(costo) : 0,
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = mantenimientosData.findIndex(m => m.id === currentItemId);
        mantenimientosData[index] = { ...mantenimientosData[index], ...mantenimientoItem };
        alert('‚úÖ Mantenimiento actualizado correctamente');
    } else {
        const newId = 'MNT' + String(mantenimientosData.length + 1).padStart(3, '0');
        mantenimientosData.push({ id: newId, ...mantenimientoItem });
        alert('‚úÖ Mantenimiento programado correctamente');
    }

    closeMantenimientoModal();
    renderMantenimientos();
}

function saveMovimiento() {
    const fecha = document.getElementById('movimientoFecha').value;
    const tipo = document.getElementById('movimientoTipo').value;
    const item = document.getElementById('movimientoItem').value;
    const cantidad = document.getElementById('movimientoCantidad').value;
    const unidad = document.getElementById('movimientoUnidad').value;
    const responsable = document.getElementById('movimientoResponsable').value;
    const observaciones = document.getElementById('movimientoObservaciones').value;

    if (!fecha || !tipo || !item || !cantidad) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const movimientoItem = {
        fecha,
        tipo,
        item,
        cantidad: parseFloat(cantidad),
        unidad: unidad || 'Unidades',
        responsable: responsable || 'N/A',
        observaciones
    };

    const newId = 'MOV' + String(movimientosData.length + 1).padStart(3, '0');
    movimientosData.push({ id: newId, ...movimientoItem });
    alert('‚úÖ Movimiento registrado correctamente');

    closeMovimientoModal();
    renderMovimientos();
}

// ============================================
// EDITAR Y ELIMINAR
// ============================================
function editEquipo(id) {
    const eq = equiposData.find(e => e.id === id);
    if (!eq) return;

    document.getElementById('modalEquipoTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Equipo';
    document.getElementById('equipoNombre').value = eq.nombre;
    document.getElementById('equipoTipo').value = eq.tipo;
    document.getElementById('equipoMarca').value = eq.marca !== 'N/A' ? eq.marca : '';
    document.getElementById('equipoModelo').value = eq.modelo !== 'N/A' ? eq.modelo : '';
    document.getElementById('equipoAnio').value = eq.anio || '';
    document.getElementById('equipoSerie').value = eq.serie !== 'N/A' ? eq.serie : '';
    document.getElementById('equipoEstado').value = eq.estado;
    document.getElementById('equipoUbicacion').value = eq.ubicacion !== 'N/A' ? eq.ubicacion : '';
    document.getElementById('equipoObservaciones').value = eq.observaciones || '';

    currentItemId = id;
    openEquipoModal();
}

function deleteEquipo(id) {
    if (confirm('¬øEst√°s seguro de eliminar este equipo?')) {
        equiposData = equiposData.filter(e => e.id !== id);
        renderEquipos();
        alert('‚úÖ Equipo eliminado correctamente');
    }
}

function editHerramienta(id) {
    const her = herramientasData.find(h => h.id === id);
    if (!her) return;

    document.getElementById('modalHerramientaTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Herramienta';
    document.getElementById('herramientaNombre').value = her.nombre;
    document.getElementById('herramientaCategoria').value = her.categoria;
    document.getElementById('herramientaCantidad').value = her.cantidad;
    document.getElementById('herramientaUbicacion').value = her.ubicacion !== 'N/A' ? her.ubicacion : '';
    document.getElementById('herramientaEstado').value = her.estado;
    document.getElementById('herramientaObservaciones').value = her.observaciones || '';

    currentItemId = id;
    openHerramientaModal();
}

function deleteHerramienta(id) {
    if (confirm('¬øEst√°s seguro de eliminar esta herramienta?')) {
        herramientasData = herramientasData.filter(h => h.id !== id);
        renderHerramientas();
        alert('‚úÖ Herramienta eliminada correctamente');
    }
}

function editMedicamento(id) {
    const med = medicamentosData.find(m => m.id === id);
    if (!med) return;

    document.getElementById('modalMedicamentoTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Medicamento';
    document.getElementById('medicamentoNombre').value = med.nombre;
    document.getElementById('medicamentoCategoria').value = med.categoria;
    document.getElementById('medicamentoStock').value = med.stock;
    document.getElementById('medicamentoStockMin').value = med.stockMin;
    document.getElementById('medicamentoUnidad').value = med.unidad;
    document.getElementById('medicamentoVencimiento').value = med.vencimiento !== 'N/A' ? med.vencimiento : '';
    document.getElementById('medicamentoLote').value = med.lote !== 'N/A' ? med.lote : '';
    document.getElementById('medicamentoProveedor').value = med.proveedor !== 'N/A' ? med.proveedor : '';
    document.getElementById('medicamentoObservaciones').value = med.observaciones || '';

    currentItemId = id;
    openMedicamentoModal();
}

function deleteMedicamento(id) {
    if (confirm('¬øEst√°s seguro de eliminar este medicamento?')) {
        medicamentosData = medicamentosData.filter(m => m.id !== id);
        renderMedicamentos();
        alert('‚úÖ Medicamento eliminado correctamente');
    }
}

function editMantenimiento(id) {
    const mnt = mantenimientosData.find(m => m.id === id);
    if (!mnt) return;

    document.getElementById('modalMantenimientoTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Mantenimiento';
    initializeEquiposSelect();
    document.getElementById('mantenimientoEquipo').value = mnt.equipo;
    document.getElementById('mantenimientoTipo').value = mnt.tipo;
    document.getElementById('mantenimientoFecha').value = mnt.fechaProgramada;
    document.getElementById('mantenimientoTecnico').value = mnt.tecnico !== 'N/A' ? mnt.tecnico : '';
    document.getElementById('mantenimientoCosto').value = mnt.costo || '';
    document.getElementById('mantenimientoEstado').value = mnt.estado;
    document.getElementById('mantenimientoObservaciones').value = mnt.observaciones || '';

    currentItemId = id;
    openMantenimientoModal();
}

function deleteMantenimiento(id) {
    if (confirm('¬øEst√°s seguro de eliminar este mantenimiento?')) {
        mantenimientosData = mantenimientosData.filter(m => m.id !== id);
        renderMantenimientos();
        alert('‚úÖ Mantenimiento eliminado correctamente');
    }
}

function deleteMovimiento(id) {
    if (confirm('¬øEst√°s seguro de eliminar este movimiento?')) {
        movimientosData = movimientosData.filter(m => m.id !== id);
        renderMovimientos();
        alert('‚úÖ Movimiento eliminado correctamente');
    }
}

// ============================================
// VER DETALLES
// ============================================
function viewDetails(type, id) {
    let detailsHTML = '';

    if (type === 'equipo') {
        const eq = equiposData.find(e => e.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Equipo</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Nombre</div>
                        <div class="detail-value">${eq.nombre}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Tipo</div>
                        <div class="detail-value">${eq.tipo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Marca</div>
                        <div class="detail-value">${eq.marca}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Modelo</div>
                        <div class="detail-value">${eq.modelo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">A√±o de Adquisici√≥n</div>
                        <div class="detail-value">${eq.anio}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">N√∫mero de Serie</div>
                        <div class="detail-value">${eq.serie}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${eq.estado.toLowerCase().replace(' ', '')}">${eq.estado}</span></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ubicaci√≥n</div>
                        <div class="detail-value">${eq.ubicacion}</div>
                    </div>
                </div>
                ${eq.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${eq.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'herramienta') {
        const her = herramientasData.find(h => h.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n de la Herramienta</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Nombre</div>
                        <div class="detail-value">${her.nombre}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Categor√≠a</div>
                        <div class="detail-value">${her.categoria}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Cantidad</div>
                        <div class="detail-value">${her.cantidad}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Ubicaci√≥n</div>
                        <div class="detail-value">${her.ubicacion}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${her.estado.toLowerCase().replace(' ', '')}">${her.estado}</span></div>
                    </div>
                </div>
                ${her.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${her.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'medicamento') {
        const med = medicamentosData.find(m => m.id === id);
        const porcentajeStock = (med.stock / med.stockMin) * 100;
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Medicamento</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Nombre</div>
                        <div class="detail-value">${med.nombre}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Categor√≠a</div>
                        <div class="detail-value">${med.categoria}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Stock Actual</div>
                        <div class="detail-value">${med.stock} ${med.unidad}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Stock M√≠nimo</div>
                        <div class="detail-value">${med.stockMin} ${med.unidad}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Nivel de Stock</div>
                        <div class="detail-value">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="flex: 1; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                                    <div style="height: 100%; width: ${Math.min(porcentajeStock, 100)}%; background: ${porcentajeStock < 50 ? '#EF4444' : porcentajeStock < 100 ? '#F59E0B' : 'var(--color-success)'};"></div>
                                </div>
                                <span style="font-weight: 700;">${porcentajeStock.toFixed(0)}%</span>
                            </div>
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha de Vencimiento</div>
                        <div class="detail-value">${med.vencimiento !== 'N/A' ? new Date(med.vencimiento).toLocaleDateString('es-ES') : 'N/A'}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Lote</div>
                        <div class="detail-value">${med.lote}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Proveedor</div>
                        <div class="detail-value">${med.proveedor}</div>
                    </div>
                </div>
                ${med.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${med.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'mantenimiento') {
        const mnt = mantenimientosData.find(m => m.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Mantenimiento</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Equipo</div>
                        <div class="detail-value">${mnt.equipo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Tipo de Mantenimiento</div>
                        <div class="detail-value">${mnt.tipo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha Programada</div>
                        <div class="detail-value">${new Date(mnt.fechaProgramada).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">T√©cnico</div>
                        <div class="detail-value">${mnt.tecnico}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Costo</div>
                        <div class="detail-value" style="color: var(--color-primary); font-size: 20px; font-weight: 800;">$${mnt.costo.toFixed(2)}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${mnt.estado.toLowerCase()}">${mnt.estado}</span></div>
                    </div>
                </div>
                ${mnt.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${mnt.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'movimiento') {
        const mov = movimientosData.find(m => m.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Movimiento</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Fecha</div>
                        <div class="detail-value">${new Date(mov.fecha).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Tipo</div>
                        <div class="detail-value"><span class="badge ${mov.tipo.toLowerCase()}">${mov.tipo}</span></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Item</div>
                        <div class="detail-value">${mov.item}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Cantidad</div>
                        <div class="detail-value">${mov.cantidad} ${mov.unidad}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Responsable</div>
                        <div class="detail-value">${mov.responsable}</div>
                    </div>
                </div>
                ${mov.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${mov.observaciones}</p>` : ''}
            </div>
        `;
    }

    document.getElementById('detailsContent').innerHTML = detailsHTML;
    document.getElementById('modalDetails').classList.add('active');
    document.body.style.overflow = 'hidden';
}

// ============================================
// EVENT LISTENERS
// ============================================
document.getElementById('btnAddEquipo').addEventListener('click', () => {
    document.getElementById('modalEquipoTitle').innerHTML = '<span>üöú</span> Agregar Equipo';
    document.getElementById('equipoForm').reset();
    currentItemId = null;
    openEquipoModal();
});

document.getElementById('btnAddHerramienta').addEventListener('click', () => {
    document.getElementById('modalHerramientaTitle').innerHTML = '<span>üî®</span> Agregar Herramienta';
    document.getElementById('herramientaForm').reset();
    currentItemId = null;
    openHerramientaModal();
});

document.getElementById('btnAddMedicamento').addEventListener('click', () => {
    document.getElementById('modalMedicamentoTitle').innerHTML = '<span>üíä</span> Agregar Medicamento';
    document.getElementById('medicamentoForm').reset();
    currentItemId = null;
    openMedicamentoModal();
});

document.getElementById('btnAddMantenimiento').addEventListener('click', () => {
    document.getElementById('modalMantenimientoTitle').innerHTML = '<span>üîß</span> Programar Mantenimiento';
    document.getElementById('mantenimientoForm').reset();
    document.getElementById('mantenimientoFecha').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openMantenimientoModal();
});

document.getElementById('btnAddMovimiento').addEventListener('click', () => {
    document.getElementById('modalMovimientoTitle').innerHTML = '<span>üìä</span> Registrar Movimiento';
    document.getElementById('movimientoForm').reset();
    document.getElementById('movimientoFecha').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openMovimientoModal();
});

// Cerrar modales al hacer click fuera
document.querySelectorAll('.modal-overlay').forEach(modal => {
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// ============================================
// INICIALIZAR
// ============================================
document.addEventListener('DOMContentLoaded', () => {
    renderEquipos();
});
</script>