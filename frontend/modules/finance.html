<!-- ============================================
     M√ìDULO: FINANZAS Y CONTABILIDAD
     Sistema CattleSIS - Gesti√≥n Ganadera
============================================ -->

<style>
    .finance-container {
        max-width: 1800px;
        margin: 0 auto;
        animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Header del m√≥dulo */
    .module-header {
        background: var(--gradient-primary);
        color: white;
        padding: 32px;
        border-radius: 16px;
        margin-bottom: 24px;
        box-shadow: var(--shadow-primary);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .header-left h1 {
        font-size: 32px;
        font-weight: 900;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .header-left p {
        opacity: 0.9;
        font-size: 15px;
    }

    .header-stats {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 20px;
        margin-top: 24px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-radius: 12px;
        text-align: center;
    }

    .stat-value {
        font-size: 36px;
        font-weight: 900;
        margin-bottom: 4px;
    }

    .stat-label {
        font-size: 13px;
        opacity: 0.9;
    }

    .stat-trend {
        font-size: 13px;
        margin-top: 6px;
        font-weight: 700;
    }

    .stat-trend.up {
        color: #10B981;
    }

    .stat-trend.down {
        color: #EF4444;
    }

    /* Tabs */
    .tabs-container {
        background: white;
        border-radius: 16px;
        padding: 20px 24px 0;
        margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .tabs {
        display: flex;
        gap: 8px;
        border-bottom: 2px solid #F3F4F6;
        overflow-x: auto;
    }

    .tab {
        padding: 12px 24px;
        border: none;
        background: none;
        font-size: 14px;
        font-weight: 600;
        color: #6B7280;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        margin-bottom: -2px;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .tab:hover {
        color: var(--color-primary);
    }

    .tab.active {
        color: var(--color-primary);
        border-bottom-color: var(--color-primary);
    }

    /* Toolbar */
    .toolbar {
        background: white;
        padding: 24px;
        border-radius: 16px;
        margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .toolbar-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .search-box {
        flex: 1;
        max-width: 400px;
        position: relative;
    }

    .search-box input {
        width: 100%;
        padding: 12px 16px 12px 44px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    .search-box input:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 4px var(--color-primary-very-light);
    }

    .search-icon {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        color: #9CA3AF;
    }

    .btn-primary {
        background: var(--gradient-primary);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-primary);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-primary-hover);
    }

    .btn-success {
        background: linear-gradient(135deg, var(--color-success) 0%, #059669 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }

    .btn-danger {
        background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    .btn-danger:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
    }

    .filters {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
    }

    .filter-group {
        flex: 1;
        min-width: 200px;
    }

    .filter-label {
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        margin-bottom: 6px;
        display: block;
        text-transform: uppercase;
    }

    .filter-select {
        width: 100%;
        padding: 10px 14px;
        border: 2px solid #E5E7EB;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        color: #1F2937;
        cursor: pointer;
        transition: all 0.2s ease;
        background: white;
    }

    .filter-select:focus {
        outline: none;
        border-color: var(--color-primary);
    }

    /* Grid de tarjetas */
    .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 20px;
        margin-bottom: 24px;
    }

    .finance-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        border-left: 4px solid;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .finance-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    }

    .finance-card.ingreso {
        border-color: var(--color-success);
    }

    .finance-card.egreso {
        border-color: #EF4444;
    }

    .finance-card.pendiente {
        border-color: var(--color-warning);
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
    }

    .card-title {
        font-size: 18px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .card-badge {
        font-size: 13px;
        font-weight: 700;
        padding: 6px 12px;
        border-radius: 6px;
    }

    .card-badge.pagado {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .card-badge.pendiente {
        background: var(--color-warning-light);
        color: var(--color-warning);
    }

    .card-badge.vencido {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    .card-body {
        margin-bottom: 16px;
    }

    .finance-value {
        font-size: 36px;
        font-weight: 900;
        margin-bottom: 4px;
    }

    .finance-value.ingreso {
        color: var(--color-success);
    }

    .finance-value.egreso {
        color: #EF4444;
    }

    .finance-subtitle {
        font-size: 14px;
        color: #6B7280;
    }

    .card-info {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 12px;
    }

    .card-info-item {
        font-size: 13px;
        color: #6B7280;
    }

    .card-info-item strong {
        color: #1F2937;
        font-weight: 700;
    }

    .card-footer {
        display: flex;
        gap: 8px;
        padding-top: 16px;
        border-top: 2px solid #F3F4F6;
    }

    /* Tabla */
    .table-container {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
    }

    .table-wrapper {
        overflow-x: auto;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
    }

    .data-table thead {
        background: #F9FAFB;
    }

    .data-table th {
        padding: 16px;
        text-align: left;
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-bottom: 2px solid #E5E7EB;
    }

    .data-table td {
        padding: 16px;
        border-bottom: 1px solid #F3F4F6;
        font-size: 14px;
        color: #1F2937;
    }

    .data-table tbody tr {
        transition: all 0.2s ease;
    }

    .data-table tbody tr:hover {
        background: #F9FAFB;
    }

    /* Badges */
    .badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
    }

    .badge.ingreso {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.egreso {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    .badge.pagado {
        background: var(--color-success-light);
        color: var(--color-success);
    }

    .badge.pendiente {
        background: var(--color-warning-light);
        color: var(--color-warning);
    }

    .badge.vencido {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
    }

    /* Botones de acci√≥n */
    .action-buttons {
        display: flex;
        gap: 8px;
    }

    .btn-action {
        width: 32px;
        height: 32px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        transition: all 0.2s ease;
    }

    .btn-view {
        background: rgba(59, 130, 246, 0.1);
        color: #2563EB;
    }

    .btn-view:hover {
        background: #2563EB;
        color: white;
    }

    .btn-edit {
        background: rgba(245, 158, 11, 0.1);
        color: #D97706;
    }

    .btn-edit:hover {
        background: #F59E0B;
        color: white;
    }

    .btn-delete {
        background: rgba(239, 68, 68, 0.1);
        color: #DC2626;
    }

    .btn-delete:hover {
        background: #EF4444;
        color: white;
    }

    .btn-pay {
        background: rgba(16, 185, 129, 0.1);
        color: var(--color-success);
    }

    .btn-pay:hover {
        background: var(--color-success);
        color: white;
    }

    /* Modal */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 9999;
        animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .modal-content {
        background: white;
        border-radius: 20px;
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-header {
        padding: 24px;
        border-bottom: 2px solid #F3F4F6;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-title {
        font-size: 24px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .btn-close {
        width: 36px;
        height: 36px;
        border: none;
        background: #F3F4F6;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
        color: #6B7280;
        transition: all 0.2s ease;
    }

    .btn-close:hover {
        background: #E5E7EB;
        color: #1F2937;
    }

    .modal-body {
        padding: 24px;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    .form-label {
        font-size: 13px;
        font-weight: 700;
        color: #374151;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .form-label .required {
        color: #EF4444;
    }

    .form-input {
        padding: 12px 16px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        color: #1F2937;
        transition: all 0.3s ease;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 4px var(--color-primary-very-light);
    }

    .form-select {
        padding: 12px 16px;
        border: 2px solid #E5E7EB;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        color: #1F2937;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
    }

    .form-select:focus {
        outline: none;
        border-color: var(--color-primary);
    }

    .modal-footer {
        padding: 20px 24px;
        border-top: 2px solid #F3F4F6;
        display: flex;
        justify-content: flex-end;
        gap: 12px;
    }

    .btn-secondary {
        padding: 12px 24px;
        border: 2px solid #E5E7EB;
        background: white;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        color: #6B7280;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-secondary:hover {
        border-color: #D1D5DB;
        background: #F9FAFB;
    }

    .btn-save {
        padding: 12px 32px;
        background: var(--gradient-primary);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-primary);
    }

    .btn-save:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-primary-hover);
    }

    /* Detalles */
    .detail-section {
        margin-bottom: 24px;
    }

    .detail-section-title {
        font-size: 16px;
        font-weight: 700;
        color: #1F2937;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 2px solid #F3F4F6;
    }

    .detail-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }

    .detail-item {
        display: flex;
        flex-direction: column;
    }

    .detail-label {
        font-size: 12px;
        font-weight: 700;
        color: #6B7280;
        text-transform: uppercase;
        margin-bottom: 6px;
    }

    .detail-value {
        font-size: 15px;
        font-weight: 600;
        color: #1F2937;
    }

    /* Alertas */
    .alert-section {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
    }

    .alert-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 2px solid #F3F4F6;
    }

    .alert-title {
        font-size: 20px;
        font-weight: 800;
        color: #1F2937;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .alert-item {
        display: flex;
        gap: 14px;
        padding: 16px;
        border-radius: 12px;
        margin-bottom: 12px;
        border-left: 4px solid;
        transition: all 0.2s ease;
    }

    .alert-item:hover {
        transform: translateX(4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .alert-item.urgente {
        background: #FEF2F2;
        border-color: #EF4444;
    }

    .alert-item.advertencia {
        background: #FFFBEB;
        border-color: #F59E0B;
    }

    .alert-item.info {
        background: #EFF6FF;
        border-color: #3B82F6;
    }

    .alert-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        flex-shrink: 0;
    }

    .alert-content {
        flex: 1;
    }

    .alert-content-title {
        font-size: 15px;
        font-weight: 700;
        color: #1F2937;
        margin-bottom: 4px;
    }

    .alert-desc {
        font-size: 13px;
        color: #6B7280;
        line-height: 1.5;
    }

    /* Estad√≠sticas */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 24px;
    }

    .stat-box {
        background: white;
        padding: 24px;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        border-left: 4px solid;
    }

    .stat-box.primary {
        border-color: var(--color-primary);
    }

    .stat-box.success {
        border-color: var(--color-success);
    }

    .stat-box.danger {
        border-color: #EF4444;
    }

    .stat-box.warning {
        border-color: var(--color-warning);
    }

    .stat-box-label {
        font-size: 14px;
        color: #6B7280;
        margin-bottom: 8px;
        font-weight: 600;
    }

    .stat-box-value {
        font-size: 32px;
        font-weight: 800;
        color: #1F2937;
    }

    .stat-box-trend {
        font-size: 13px;
        margin-top: 8px;
        font-weight: 600;
    }

    .chart-container {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-bottom: 24px;
    }

    .chart-header {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 20px;
        color: #1F2937;
    }

    /* Quick actions */
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
    }

    .quick-action-btn {
        padding: 20px;
        background: white;
        border: 2px solid #E5E7EB;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }

    .quick-action-btn:hover {
        border-color: var(--color-primary);
        background: var(--color-primary-very-light);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .quick-action-icon {
        font-size: 32px;
        margin-bottom: 8px;
    }

    .quick-action-label {
        font-size: 14px;
        font-weight: 700;
        color: #1F2937;
    }

    /* Resumen Financiero */
    .financial-summary {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 24px;
    }

    .summary-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        text-align: center;
    }

    .summary-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        margin: 0 auto 16px;
    }

    .summary-value {
        font-size: 36px;
        font-weight: 900;
        margin-bottom: 8px;
    }

    .summary-label {
        font-size: 14px;
        color: #6B7280;
        font-weight: 600;
    }

    /* Responsive */
    @media (max-width: 1400px) {
        .header-stats {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 1024px) {
        .header-stats {
            grid-template-columns: repeat(2, 1fr);
        }

        .financial-summary {
            grid-template-columns: 1fr;
        }

        .cards-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .detail-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .header-content {
            flex-direction: column;
            gap: 16px;
            text-align: center;
        }

        .toolbar-top {
            flex-direction: column;
            gap: 16px;
        }

        .search-box {
            max-width: 100%;
        }

        .filters {
            flex-direction: column;
        }

        .cards-grid {
            grid-template-columns: 1fr;
        }

        .header-stats {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="finance-container">
    <!-- Header del m√≥dulo -->
    <div class="module-header">
        <div class="header-content">
            <div class="header-left">
                <h1>üí∞ Finanzas y Contabilidad</h1>
                <p>Control completo de ingresos, gastos y flujo de caja</p>
            </div>
        </div>
        
        <div class="header-stats">
            <div class="stat-card">
                <div class="stat-value">$8,450</div>
                <div class="stat-label">Ingresos Mes</div>
                <div class="stat-trend up">‚Üë +15.2%</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$5,320</div>
                <div class="stat-label">Egresos Mes</div>
                <div class="stat-trend down">‚Üë +8.5%</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$3,130</div>
                <div class="stat-label">Balance Mes</div>
                <div class="stat-trend up">‚Üë +22%</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$2,450</div>
                <div class="stat-label">Por Cobrar</div>
                <div class="stat-trend">3 pendientes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$1,850</div>
                <div class="stat-label">Por Pagar</div>
                <div class="stat-trend">2 vencidos</div>
            </div>
        </div>
    </div>

    <!-- Alertas Financieras -->
    <div class="alert-section">
        <div class="alert-header">
            <div class="alert-title">‚ö†Ô∏è Alertas Financieras</div>
        </div>

        <div class="alert-item urgente">
            <div class="alert-icon" style="background: #FEE2E2; color: #EF4444;">üí∏</div>
            <div class="alert-content">
                <div class="alert-content-title">2 Pagos Vencidos</div>
                <div class="alert-desc">Proveedor de Alimentos: $850 (Vencido hace 5 d√≠as) - Veterinaria: $280 (Vencido hace 2 d√≠as)</div>
            </div>
        </div>

        <div class="alert-item advertencia">
            <div class="alert-icon" style="background: #FEF3C7; color: #F59E0B;">‚è∞</div>
            <div class="alert-content">
                <div class="alert-content-title">Facturas por Vencer - Esta Semana</div>
                <div class="alert-desc">3 facturas por $1,240 con vencimiento en los pr√≥ximos 7 d√≠as</div>
            </div>
        </div>

        <div class="alert-item info">
            <div class="alert-icon" style="background: #DBEAFE; color: #3B82F6;">üìä</div>
            <div class="alert-content">
                <div class="alert-content-title">Cuentas por Cobrar - Seguimiento</div>
                <div class="alert-desc">L√°cteos Santa Cruz debe $1,200 - Pago programado para el 20/10</div>
            </div>
        </div>
    </div>

    <!-- Resumen Financiero -->
    <div class="financial-summary">
        <div class="summary-card" style="border-left: 4px solid var(--color-success);">
            <div class="summary-icon" style="background: var(--color-success-light); color: var(--color-success);">üíµ</div>
            <div class="summary-value" style="color: var(--color-success);">$8,450</div>
            <div class="summary-label">Total Ingresos</div>
        </div>

        <div class="summary-card" style="border-left: 4px solid #EF4444;">
            <div class="summary-icon" style="background: rgba(239, 68, 68, 0.1); color: #EF4444;">üí∏</div>
            <div class="summary-value" style="color: #EF4444;">$5,320</div>
            <div class="summary-label">Total Egresos</div>
        </div>

        <div class="summary-card" style="border-left: 4px solid var(--color-primary);">
            <div class="summary-icon" style="background: var(--color-primary-light); color: var(--color-primary);">üìà</div>
            <div class="summary-value" style="color: var(--color-primary);">$3,130</div>
            <div class="summary-label">Balance Neto</div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="quick-action-btn" onclick="openIngresoModal()">
            <div class="quick-action-icon">üíµ</div>
            <div class="quick-action-label">Nuevo Ingreso</div>
        </button>
        <button class="quick-action-btn" onclick="openEgresoModal()">
            <div class="quick-action-icon">üí∏</div>
            <div class="quick-action-label">Nuevo Egreso</div>
        </button>
        <button class="quick-action-btn" onclick="showTab('cxc')">
            <div class="quick-action-icon">üì•</div>
            <div class="quick-action-label">Cuentas x Cobrar</div>
        </button>
        <button class="quick-action-btn" onclick="showTab('cxp')">
            <div class="quick-action-icon">üì§</div>
            <div class="quick-action-label">Cuentas x Pagar</div>
        </button>
    </div>

    <!-- Tabs de navegaci√≥n -->
    <div class="tabs-container">
        <div class="tabs">
            <button class="tab active" data-tab="ingresos">üíµ Ingresos</button>
            <button class="tab" data-tab="egresos">üí∏ Egresos</button>
            <button class="tab" data-tab="cxc">üì• Cuentas x Cobrar</button>
            <button class="tab" data-tab="cxp">üì§ Cuentas x Pagar</button>
            <button class="tab" data-tab="flujo">üìä Flujo de Caja</button>
        </div>
    </div>

    <!-- TAB: INGRESOS -->
    <div id="ingresosContent">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchIngresos" placeholder="Buscar ingreso...">
                </div>
                <button class="btn-success" id="btnAddIngreso">
                    <span>‚ûï</span> Nuevo Ingreso
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Per√≠odo</label>
                    <select class="filter-select" id="filterPeriodoIngreso">
                        <option value="mes" selected>Este Mes</option>
                        <option value="semana">Esta Semana</option>
                        <option value="hoy">Hoy</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Categor√≠a</label>
                    <select class="filter-select" id="filterCategoriaIngreso">
                        <option value="">Todas</option>
                        <option value="Venta Leche">Venta Leche</option>
                        <option value="Venta Ganado">Venta Ganado</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Concepto</th>
                            <th>Categor√≠a</th>
                            <th>Cliente</th>
                            <th>Monto</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="ingresosTableBody">
                        <!-- Los ingresos se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: EGRESOS -->
    <div id="egresosContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchEgresos" placeholder="Buscar egreso...">
                </div>
                <button class="btn-danger" id="btnAddEgreso">
                    <span>‚ûï</span> Nuevo Egreso
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Per√≠odo</label>
                    <select class="filter-select" id="filterPeriodoEgreso">
                        <option value="mes" selected>Este Mes</option>
                        <option value="semana">Esta Semana</option>
                        <option value="hoy">Hoy</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Categor√≠a</label>
                    <select class="filter-select" id="filterCategoriaEgreso">
                        <option value="">Todas</option>
                        <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                        <option value="Medicamentos">Medicamentos</option>
                        <option value="Servicios">Servicios</option>
                        <option value="Personal">Personal</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Concepto</th>
                            <th>Categor√≠a</th>
                            <th>Proveedor</th>
                            <th>Monto</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="egresosTableBody">
                        <!-- Los egresos se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: CUENTAS POR COBRAR -->
    <div id="cxcContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchCXC" placeholder="Buscar cuenta...">
                </div>
                <button class="btn-primary" id="btnAddCXC">
                    <span>‚ûï</span> Nueva Cuenta por Cobrar
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="filter-select" id="filterEstadoCXC">
                        <option value="">Todos</option>
                        <option value="Pendiente">Pendiente</option>
                        <option value="Pagado">Pagado</option>
                        <option value="Vencido">Vencido</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Concepto</th>
                            <th>Fecha Emisi√≥n</th>
                            <th>Fecha Vencimiento</th>
                            <th>Monto</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="cxcTableBody">
                        <!-- Las cuentas se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: CUENTAS POR PAGAR -->
    <div id="cxpContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchCXP" placeholder="Buscar cuenta...">
                </div>
                <button class="btn-primary" id="btnAddCXP">
                    <span>‚ûï</span> Nueva Cuenta por Pagar
                </button>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="filter-select" id="filterEstadoCXP">
                        <option value="">Todos</option>
                        <option value="Pendiente">Pendiente</option>
                        <option value="Pagado">Pagado</option>
                        <option value="Vencido">Vencido</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Proveedor</th>
                            <th>Concepto</th>
                            <th>Fecha Emisi√≥n</th>
                            <th>Fecha Vencimiento</th>
                            <th>Monto</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="cxpTableBody">
                        <!-- Las cuentas se cargan con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- TAB: FLUJO DE CAJA -->
    <div id="flujoContent" style="display: none;">
        <div class="toolbar">
            <div class="toolbar-top">
                <h3 style="font-size: 18px; font-weight: 700; color: #1F2937;">An√°lisis de Flujo de Caja</h3>
                <div class="filters" style="max-width: 300px;">
                    <div class="filter-group">
                        <label class="filter-label">Per√≠odo</label>
                        <select class="filter-select" id="filterPeriodoFlujo">
                            <option value="mes" selected>Este Mes</option>
                            <option value="trimestre">Trimestre</option>
                            <option value="a√±o">A√±o</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-box success">
                <div class="stat-box-label">Total Ingresos</div>
                <div class="stat-box-value">$8,450</div>
                <div class="stat-box-trend" style="color: var(--color-success);">‚Üë +15.2% vs mes anterior</div>
            </div>

            <div class="stat-box danger">
                <div class="stat-box-label">Total Egresos</div>
                <div class="stat-box-value">$5,320</div>
                <div class="stat-box-trend" style="color: #EF4444;">‚Üë +8.5% vs mes anterior</div>
            </div>

            <div class="stat-box primary">
                <div class="stat-box-label">Balance Neto</div>
                <div class="stat-box-value">$3,130</div>
                <div class="stat-box-trend" style="color: var(--color-success);">‚Üë +22% vs mes anterior</div>
            </div>

            <div class="stat-box warning">
                <div class="stat-box-label">Cuentas por Cobrar</div>
                <div class="stat-box-value">$2,450</div>
                <div class="stat-box-trend">3 cuentas pendientes</div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-header">üìä Ingresos vs Egresos - √öltimos 6 Meses</div>
            <div style="height: 300px; display: flex; align-items: flex-end; gap: 30px; padding: 20px;">
                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 75%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$6.2k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 55%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$4.8k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: #6B7280; font-weight: 600;">May</div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 82%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$6.8k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 58%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$5.0k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: #6B7280; font-weight: 600;">Jun</div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 88%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$7.3k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 60%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$5.2k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: #6B7280; font-weight: 600;">Jul</div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 85%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$7.1k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 62%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$5.4k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: #6B7280; font-weight: 600;">Ago</div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 92%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$7.6k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 58%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$5.0k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: #6B7280; font-weight: 600;">Sep</div>
                </div>

                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div style="width: 100%; display: flex; gap: 8px; align-items: flex-end; height: 250px;">
                        <div style="flex: 1; background: linear-gradient(to top, var(--color-success), var(--color-success-light)); height: 95%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: var(--color-success);">$8.5k</div>
                        </div>
                        <div style="flex: 1; background: linear-gradient(to top, #EF4444, #FCA5A5); height: 60%; border-radius: 6px; position: relative;">
                            <div style="position: absolute; top: -20px; width: 100%; text-align: center; font-size: 11px; font-weight: 700; color: #EF4444;">$5.3k</div>
                        </div>
                    </div>
                    <div style="font-size: 11px; color: var(--color-primary); font-weight: 700;">Oct</div>
                </div>
            </div>

            <div style="display: flex; justify-content: center; gap: 30px; margin-top: 20px; padding-top: 20px; border-top: 2px solid #F3F4F6;">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 16px; height: 16px; background: var(--color-success); border-radius: 4px;"></div>
                    <span style="font-size: 13px; font-weight: 600; color: #6B7280;">Ingresos</span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <div style="width: 16px; height: 16px; background: #EF4444; border-radius: 4px;"></div>
                    <span style="font-size: 13px; font-weight: 600; color: #6B7280;">Egresos</span>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-header">üíº Distribuci√≥n de Egresos por Categor√≠a</div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; padding: 10px 0;">
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-weight: 600; font-size: 14px;">Alimentaci√≥n</span>
                        <span style="font-weight: 700; color: var(--color-primary);">$2,450 (46%)</span>
                    </div>
                    <div style="width: 100%; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                        <div style="width: 46%; height: 100%; background: var(--color-primary);"></div>
                    </div>
                </div>

                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-weight: 600; font-size: 14px;">Medicamentos</span>
                        <span style="font-weight: 700; color: var(--color-success);">$850 (16%)</span>
                    </div>
                    <div style="width: 100%; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                        <div style="width: 16%; height: 100%; background: var(--color-success);"></div>
                    </div>
                </div>

                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-weight: 600; font-size: 14px;">Personal</span>
                        <span style="font-weight: 700; color: var(--color-warning);">$1,120 (21%)</span>
                    </div>
                    <div style="width: 100%; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                        <div style="width: 21%; height: 100%; background: var(--color-warning);"></div>
                    </div>
                </div>

                <div>
                    <div style="display: flex; justify-content: spacebe-tween;  margin-bottom: 8px;">
                        <span style="font-weight: 600; font-size: 14px;">Servicios</span>
                        <span style="font-weight: 700; color: #8B5CF6;">$620 (12%)</span>
                    </div>
                    <div style="width: 100%; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                        <div style="width: 12%; height: 100%; background: #8B5CF6;"></div>
                    </div>
                </div>

                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="font-weight: 600; font-size: 14px;">Otros</span>
                        <span style="font-weight: 700; color: #6B7280;">$280 (5%)</span>
                    </div>
                    <div style="width: 100%; height: 10px; background: #E5E7EB; border-radius: 5px; overflow: hidden;">
                        <div style="width: 5%; height: 100%; background: #6B7280;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Nuevo Ingreso -->
<div class="modal-overlay" id="modalIngreso">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalIngresoTitle">
                <span>üíµ</span> Nuevo Ingreso
            </h2>
            <button class="btn-close" onclick="closeIngresoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="ingresoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Fecha <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="ingresoFecha" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Categor√≠a <span class="required">*</span>
                        </label>
                        <select class="form-select" id="ingresoCategoria" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Venta Leche">Venta de Leche</option>
                            <option value="Venta Ganado">Venta de Ganado</option>
                            <option value="Venta Esti√©rcol">Venta de Esti√©rcol</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            Concepto <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="ingresoConcepto" placeholder="Ej: Venta de leche - Octubre" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Cliente <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="ingresoCliente" placeholder="Nombre del cliente" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Monto ($) <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="ingresoMonto" placeholder="Ej: 1500.00" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            M√©todo de Pago <span class="required">*</span>
                        </label>
                        <select class="form-select" id="ingresoMetodo" required>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Transferencia">Transferencia</option>
                            <option value="Cheque">Cheque</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="ingresoEstado" required>
                            <option value="Pagado">Pagado</option>
                            <option value="Pendiente">Pendiente</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="ingresoObservaciones" rows="3" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeIngresoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveIngreso()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Nuevo Egreso -->
<div class="modal-overlay" id="modalEgreso">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalEgresoTitle">
                <span>üí∏</span> Nuevo Egreso
            </h2>
            <button class="btn-close" onclick="closeEgresoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="egresoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Fecha <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="egresoFecha" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Categor√≠a <span class="required">*</span>
                        </label>
                        <select class="form-select" id="egresoCategoria" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                            <option value="Medicamentos">Medicamentos</option>
                            <option value="Personal">Personal</option>
                            <option value="Servicios">Servicios</option>
                            <option value="Mantenimiento">Mantenimiento</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            Concepto <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="egresoConcepto" placeholder="Ej: Compra de concentrado" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Proveedor <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="egresoProveedor" placeholder="Nombre del proveedor" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Monto ($) <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="egresoMonto" placeholder="Ej: 850.00" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            M√©todo de Pago <span class="required">*</span>
                        </label>
                        <select class="form-select" id="egresoMetodo" required>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Transferencia">Transferencia</option>
                            <option value="Cheque">Cheque</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="egresoEstado" required>
                            <option value="Pagado">Pagado</option>
                            <option value="Pendiente">Pendiente</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="egresoObservaciones" rows="3" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeEgresoModal()">Cancelar</button>
            <button class="btn-save" onclick="saveEgreso()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Nueva Cuenta por Cobrar -->
<div class="modal-overlay" id="modalCXC">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalCXCTitle">
                <span>üì•</span> Nueva Cuenta por Cobrar
            </h2>
            <button class="btn-close" onclick="closeCXCModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="cxcForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Cliente <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="cxcCliente" placeholder="Nombre del cliente" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Monto ($) <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="cxcMonto" placeholder="Ej: 1200.00" step="0.01" min="0" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            Concepto <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="cxcConcepto" placeholder="Ej: Venta de leche a cr√©dito" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Fecha Emisi√≥n <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="cxcFechaEmision" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Fecha Vencimiento <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="cxcFechaVenc" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="cxcEstado" required>
                            <option value="Pendiente">Pendiente</option>
                            <option value="Pagado">Pagado</option>
                            <option value="Vencido">Vencido</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="cxcObservaciones" rows="3" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeCXCModal()">Cancelar</button>
            <button class="btn-save" onclick="saveCXC()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Nueva Cuenta por Pagar -->
<div class="modal-overlay" id="modalCXP">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modalCXPTitle">
                <span>üì§</span> Nueva Cuenta por Pagar
            </h2>
            <button class="btn-close" onclick="closeCXPModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <form id="cxpForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Proveedor <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="cxpProveedor" placeholder="Nombre del proveedor" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Monto ($) <span class="required">*</span>
                        </label>
                        <input type="number" class="form-input" id="cxpMonto" placeholder="Ej: 850.00" step="0.01" min="0" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">
                            Concepto <span class="required">*</span>
                        </label>
                        <input type="text" class="form-input" id="cxpConcepto" placeholder="Ej: Compra de alimento a cr√©dito" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Fecha Emisi√≥n <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="cxpFechaEmision" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Fecha Vencimiento <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="cxpFechaVenc" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Estado <span class="required">*</span>
                        </label>
                        <select class="form-select" id="cxpEstado" required>
                            <option value="Pendiente">Pendiente</option>
                            <option value="Pagado">Pagado</option>
                            <option value="Vencido">Vencido</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="cxpObservaciones" rows="3" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeCXPModal()">Cancelar</button>
            <button class="btn-save" onclick="saveCXP()">üíæ Guardar</button>
        </div>
    </div>
</div>

<!-- Modal: Registrar Pago -->
<div class="modal-overlay" id="modalPago">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
            <h2 class="modal-title">
                <span>üí≥</span> Registrar Pago
            </h2>
            <button class="btn-close" onclick="closePagoModal()">‚úñ</button>
        </div>

        <div class="modal-body">
            <div style="background: #F9FAFB; padding: 20px; border-radius: 12px; margin-bottom: 24px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                    <div>
                        <div style="font-size: 12px; font-weight: 700; color: #6B7280; text-transform: uppercase; margin-bottom: 6px;">Cliente/Proveedor</div>
                        <div style="font-size: 15px; font-weight: 700; color: #1F2937;" id="pagoNombre">-</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; font-weight: 700; color: #6B7280; text-transform: uppercase; margin-bottom: 6px;">Monto a Pagar</div>
                        <div style="font-size: 24px; font-weight: 900; color: var(--color-primary);" id="pagoMonto">$0.00</div>
                    </div>
                </div>
            </div>

            <form id="pagoForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            Fecha de Pago <span class="required">*</span>
                        </label>
                        <input type="date" class="form-input" id="pagoFecha" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            M√©todo de Pago <span class="required">*</span>
                        </label>
                        <select class="form-select" id="pagoMetodo" required>
                            <option value="Efectivo">Efectivo</option>
                            <option value="Transferencia">Transferencia</option>
                            <option value="Cheque">Cheque</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Referencia/Comprobante</label>
                        <input type="text" class="form-input" id="pagoReferencia" placeholder="N√∫mero de comprobante, transferencia, etc.">
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Observaciones</label>
                        <textarea class="form-input" id="pagoObservaciones" rows="2" placeholder="Notas adicionales..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closePagoModal()">Cancelar</button>
            <button class="btn-save" onclick="confirmPago()">‚úÖ Confirmar Pago</button>
        </div>
    </div>
</div>

<!-- Modal: Ver Detalles -->
<div class="modal-overlay" id="modalDetails">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">
                <span>üìã</span> Detalles
            </h2>
            <button class="btn-close" onclick="closeDetailsModal()">‚úñ</button>
        </div>

        <div class="modal-body" id="detailsContent">
            <!-- Los detalles se cargan con JavaScript -->
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeDetailsModal()">Cerrar</button>
        </div>
    </div>
</div>

<script>
// ============================================
// DATOS DE EJEMPLO
// ============================================

let ingresosData = [
    { id: 'I001', fecha: '2025-10-15', concepto: 'Venta de leche - Quincena', categoria: 'Venta Leche', cliente: 'L√°cteos Santa Cruz', monto: 2100, metodo: 'Transferencia', estado: 'Pagado', observaciones: '' },
    { id: 'I002', fecha: '2025-10-10', concepto: 'Venta novillo', categoria: 'Venta Ganado', cliente: 'Matadero El Rancho', monto: 3500, metodo: 'Efectivo', estado: 'Pagado', observaciones: 'Novillo de 18 meses' },
    { id: 'I003', fecha: '2025-10-08', concepto: 'Venta de leche - Primera semana', categoria: 'Venta Leche', cliente: 'Procesadora del Valle', monto: 1850, metodo: 'Transferencia', estado: 'Pagado', observaciones: '' },
    { id: 'I004', fecha: '2025-10-17', concepto: 'Venta de leche - Octubre', categoria: 'Venta Leche', cliente: 'L√°cteos Santa Cruz', monto: 1200, metodo: 'Transferencia', estado: 'Pendiente', observaciones: 'Pago programado para el 20/10' },
];

let egresosData = [
    { id: 'E001', fecha: '2025-10-12', concepto: 'Compra de concentrado lechero', categoria: 'Alimentaci√≥n', proveedor: 'Alimentos del Campo', monto: 1450, metodo: 'Transferencia', estado: 'Pagado', observaciones: '' },
    { id: 'E002', fecha: '2025-10-10', concepto: 'Vacunaci√≥n', categoria: 'Medicamentos', proveedor: 'Veterinaria San Jos√©', monto: 280, metodo: 'Efectivo', estado: 'Pagado', observaciones: 'Vacunaci√≥n de 28 animales' },
    { id: 'E003', fecha: '2025-10-05', concepto: 'Salarios quincena', categoria: 'Personal', proveedor: 'Empleados', monto: 1120, metodo: 'Transferencia', estado: 'Pagado', observaciones: '4 empleados' },
    { id: 'E004', fecha: '2025-10-08', concepto: 'Compra de heno', categoria: 'Alimentaci√≥n', proveedor: 'Forrajes El Prado', monto: 1000, metodo: 'Cheque', estado: 'Pagado', observaciones: '' },
    { id: 'E005', fecha: '2025-10-15', concepto: 'Servicio veterinario', categoria: 'Servicios', proveedor: 'Dr. Ram√≠rez', monto: 350, metodo: 'Efectivo', estado: 'Pagado', observaciones: 'Revisi√≥n general del hato' },
    { id: 'E006', fecha: '2025-10-16', concepto: 'Reparaci√≥n cercas', categoria: 'Mantenimiento', proveedor: 'Construcciones P√©rez', monto: 620, metodo: 'Efectivo', estado: 'Pagado', observaciones: '' },
    { id: 'E007', fecha: '2025-10-17', concepto: 'Servicio el√©ctrico', categoria: 'Servicios', proveedor: 'CRE', monto: 280, metodo: 'Transferencia', estado: 'Pendiente', observaciones: 'Vence el 25/10' },
    { id: 'E008', fecha: '2025-10-18', concepto: 'Compra alimento balanceado', categoria: 'Alimentaci√≥n', proveedor: 'Alimentos del Campo', monto: 850, metodo: 'Transferencia', estado: 'Pendiente', observaciones: 'Vencido hace 5 d√≠as' },
];

let cxcData = [
    { id: 'CXC001', cliente: 'L√°cteos Santa Cruz', concepto: 'Venta de leche - Octubre', fechaEmision: '2025-10-17', fechaVenc: '2025-10-20', monto: 1200, estado: 'Pendiente', observaciones: 'Pago programado' },
    { id: 'CXC002', cliente: 'Procesadora del Valle', concepto: 'Venta de leche - Septiembre', fechaEmision: '2025-09-28', fechaVenc: '2025-10-05', monto: 850, estado: 'Vencido', observaciones: 'Contactar al cliente' },
    { id: 'CXC003', cliente: 'Queser√≠a La Esperanza', concepto: 'Venta de leche', fechaEmision: '2025-10-10', fechaVenc: '2025-10-25', monto: 400, estado: 'Pendiente', observaciones: '' },
    { id: 'CXC004', cliente: 'L√°cteos Santa Cruz', concepto: 'Venta de leche - Agosto', fechaEmision: '2025-08-15', fechaVenc: '2025-08-20', monto: 1800, estado: 'Pagado', observaciones: '' },
];

let cxpData = [
    { id: 'CXP001', proveedor: 'Alimentos del Campo', concepto: 'Compra de concentrado', fechaEmision: '2025-10-12', fechaVenc: '2025-10-12', monto: 850, estado: 'Vencido', observaciones: 'Vencido hace 5 d√≠as' },
    { id: 'CXP002', proveedor: 'Veterinaria San Jos√©', concepto: 'Compra de medicamentos', fechaEmision: '2025-10-15', fechaVenc: '2025-10-15', monto: 280, estado: 'Vencido', observaciones: 'Vencido hace 2 d√≠as' },
    { id: 'CXP003', proveedor: 'Forrajes El Prado', concepto: 'Compra de heno', fechaEmision: '2025-10-10', fechaVenc: '2025-10-25', monto: 720, estado: 'Pendiente', observaciones: '' },
    { id: 'CXP004', proveedor: 'Alimentos del Campo', concepto: 'Compra concentrado - Sept', fechaEmision: '2025-09-15', fechaVenc: '2025-09-20', monto: 1450, estado: 'Pagado', observaciones: '' },
];

let currentItemId = null;
let currentPagoType = null;
let currentPagoId = null;

// ============================================
// TABS
// ============================================
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
        showTab(this.dataset.tab);
    });
});

function showTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
    
    // Ocultar todos
    document.getElementById('ingresosContent').style.display = 'none';
    document.getElementById('egresosContent').style.display = 'none';
    document.getElementById('cxcContent').style.display = 'none';
    document.getElementById('cxpContent').style.display = 'none';
    document.getElementById('flujoContent').style.display = 'none';
    
    // Mostrar el activo
    if (tabName === 'ingresos') {
        document.getElementById('ingresosContent').style.display = 'block';
        renderIngresos();
    } else if (tabName === 'egresos') {
        document.getElementById('egresosContent').style.display = 'block';
        renderEgresos();
    } else if (tabName === 'cxc') {
        document.getElementById('cxcContent').style.display = 'block';
        renderCXC();
    } else if (tabName === 'cxp') {
        document.getElementById('cxpContent').style.display = 'block';
        renderCXP();
    } else if (tabName === 'flujo') {
        document.getElementById('flujoContent').style.display = 'block';
    }
}

// ============================================
// RENDERIZAR INGRESOS
// ============================================
function renderIngresos() {
    const tbody = document.getElementById('ingresosTableBody');
    
    if (ingresosData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay ingresos registrados</td></tr>';
        return;
    }
    
    tbody.innerHTML = ingresosData.map(ing => `
        <tr>
            <td>${new Date(ing.fecha).toLocaleDateString('es-ES')}</td>
            <td><strong>${ing.concepto}</strong></td>
            <td>${ing.categoria}</td>
            <td>${ing.cliente}</td>
            <td><strong style="color: var(--color-success); font-size: 16px;">$${ing.monto.toFixed(2)}</strong></td>
            <td><span class="badge ${ing.estado.toLowerCase()}">${ing.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('ingreso', '${ing.id}')" title="Ver">üëÅÔ∏è</button>
                    <button class="btn-action btn-edit" onclick="editIngreso('${ing.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteIngreso('${ing.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// RENDERIZAR EGRESOS
// ============================================
function renderEgresos() {
    const tbody = document.getElementById('egresosTableBody');
    
    if (egresosData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay egresos registrados</td></tr>';
        return;
    }
    
    tbody.innerHTML = egresosData.map(egr => `
        <tr>
            <td>${new Date(egr.fecha).toLocaleDateString('es-ES')}</td>
            <td><strong>${egr.concepto}</strong></td>
            <td>${egr.categoria}</td>
            <td>${egr.proveedor}</td>
            <td><strong style="color: #EF4444; font-size: 16px;">$${egr.monto.toFixed(2)}</strong></td>
            <td><span class="badge ${egr.estado.toLowerCase()}">${egr.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('egreso', '${egr.id}')" title="Ver">üëÅÔ∏è</button>
                    <button class="btn-action btn-edit" onclick="editEgreso('${egr.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteEgreso('${egr.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// RENDERIZAR CXC
// ============================================
function renderCXC() {
    const tbody = document.getElementById('cxcTableBody');
    
    if (cxcData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay cuentas por cobrar registradas</td></tr>';
        return;
    }
    
    tbody = cxcData.map(cxc => `
        <tr>
            <td><strong>${cxc.cliente}</strong></td>
            <td>${cxc.concepto}</td>
            <td>${new Date(cxc.fechaEmision).toLocaleDateString('es-ES')}</td>
            <td>${new Date(cxc.fechaVenc).toLocaleDateString('es-ES')}</td>
            <td><strong style="color: var(--color-success); font-size: 16px;">$${cxc.monto.toFixed(2)}</strong></td>
            <td><span class="badge ${cxc.estado.toLowerCase()}">${cxc.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('cxc', '${cxc.id}')" title="Ver">üëÅÔ∏è</button>
                    ${cxc.estado !== 'Pagado' ? `<button class="btn-action btn-pay" onclick="openPagoModal('cxc', '${cxc.id}')" title="Registrar Pago">üí≥</button>` : ''}
                    <button class="btn-action btn-edit" onclick="editCXC('${cxc.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteCXC('${cxc.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// RENDERIZAR CXP
// ============================================
function renderCXP() {
    const tbody = document.getElementById('cxpTableBody');
    
    if (cxpData.length === 0) {
        tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; color:#6B7280; padding:40px;">No hay cuentas por pagar registradas</td></tr>';
        return;
    }
    
    tbody.innerHTML = cxpData.map(cxp => `
        <tr>
            <td><strong>${cxp.proveedor}</strong></td>
            <td>${cxp.concepto}</td>
            <td>${new Date(cxp.fechaEmision).toLocaleDateString('es-ES')}</td>
            <td>${new Date(cxp.fechaVenc).toLocaleDateString('es-ES')}</td>
            <td><strong style="color: #EF4444; font-size: 16px;">$${cxp.monto.toFixed(2)}</strong></td>
            <td><span class="badge ${cxp.estado.toLowerCase()}">${cxp.estado}</span></td>
            <td>
                <div class="action-buttons">
                    <button class="btn-action btn-view" onclick="viewDetails('cxp', '${cxp.id}')" title="Ver">üëÅÔ∏è</button>
                    ${cxp.estado !== 'Pagado' ? `<button class="btn-action btn-pay" onclick="openPagoModal('cxp', '${cxp.id}')" title="Registrar Pago">üí≥</button>` : ''}
                    <button class="btn-action btn-edit" onclick="editCXP('${cxp.id}')" title="Editar">‚úèÔ∏è</button>
                    <button class="btn-action btn-delete" onclick="deleteCXP('${cxp.id}')" title="Eliminar">üóëÔ∏è</button>
                </div>
            </td>
        </tr>
    `).join('');
}

// ============================================
// MODALES
// ============================================
function openIngresoModal() {
    document.getElementById('modalIngreso').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeIngresoModal() {
    document.getElementById('modalIngreso').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('ingresoForm').reset();
    currentItemId = null;
}

function openEgresoModal() {
    document.getElementById('modalEgreso').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeEgresoModal() {
    document.getElementById('modalEgreso').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('egresoForm').reset();
    currentItemId = null;
}

function openCXCModal() {
    document.getElementById('modalCXC').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeCXCModal() {
    document.getElementById('modalCXC').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('cxcForm').reset();
    currentItemId = null;
}

function openCXPModal() {
    document.getElementById('modalCXP').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeCXPModal() {
    document.getElementById('modalCXP').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('cxpForm').reset();
    currentItemId = null;
}

function openPagoModal(type, id) {
    currentPagoType = type;
    currentPagoId = id;
    
    let item;
    if (type === 'cxc') {
        item = cxcData.find(c => c.id === id);
        document.getElementById('pagoNombre').textContent = item.cliente;
    } else if (type === 'cxp') {
        item = cxpData.find(c => c.id === id);
        document.getElementById('pagoNombre').textContent = item.proveedor;
    }
    
    document.getElementById('pagoMonto').textContent = `$${item.monto.toFixed(2)}`;
    document.getElementById('pagoFecha').value = new Date().toISOString().split('T')[0];
    
    document.getElementById('modalPago').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closePagoModal() {
    document.getElementById('modalPago').classList.remove('active');
    document.body.style.overflow = 'auto';
    document.getElementById('pagoForm').reset();
    currentPagoType = null;
    currentPagoId = null;
}

function closeDetailsModal() {
    document.getElementById('modalDetails').classList.remove('active');
    document.body.style.overflow = 'auto';
}

// ============================================
// GUARDAR
// ============================================
function saveIngreso() {
    const fecha = document.getElementById('ingresoFecha').value;
    const categoria = document.getElementById('ingresoCategoria').value;
    const concepto = document.getElementById('ingresoConcepto').value;
    const cliente = document.getElementById('ingresoCliente').value;
    const monto = document.getElementById('ingresoMonto').value;
    const metodo = document.getElementById('ingresoMetodo').value;
    const estado = document.getElementById('ingresoEstado').value;
    const observaciones = document.getElementById('ingresoObservaciones').value;

    if (!fecha || !categoria || !concepto || !cliente || !monto || !metodo || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const ingresoItem = {
        fecha,
        categoria,
        concepto,
        cliente,
        monto: parseFloat(monto),
        metodo,
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = ingresosData.findIndex(i => i.id === currentItemId);
        ingresosData[index] = { ...ingresosData[index], ...ingresoItem };
        alert('‚úÖ Ingreso actualizado correctamente');
    } else {
        const newId = 'I' + String(ingresosData.length + 1).padStart(3, '0');
        ingresosData.push({ id: newId, ...ingresoItem });
        alert('‚úÖ Ingreso registrado correctamente');
    }

    closeIngresoModal();
    renderIngresos();
}

function saveEgreso() {
    const fecha = document.getElementById('egresoFecha').value;
    const categoria = document.getElementById('egresoCategoria').value;
    const concepto = document.getElementById('egresoConcepto').value;
    const proveedor = document.getElementById('egresoProveedor').value;
    const monto = document.getElementById('egresoMonto').value;
    const metodo = document.getElementById('egresoMetodo').value;
    const estado = document.getElementById('egresoEstado').value;
    const observaciones = document.getElementById('egresoObservaciones').value;

    if (!fecha || !categoria || !concepto || !proveedor || !monto || !metodo || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const egresoItem = {
        fecha,
        categoria,
        concepto,
        proveedor,
        monto: parseFloat(monto),
        metodo,
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = egresosData.findIndex(e => e.id === currentItemId);
        egresosData[index] = { ...egresosData[index], ...egresoItem };
        alert('‚úÖ Egreso actualizado correctamente');
    } else {
        const newId = 'E' + String(egresosData.length + 1).padStart(3, '0');
        egresosData.push({ id: newId, ...egresoItem });
        alert('‚úÖ Egreso registrado correctamente');
    }

    closeEgresoModal();
    renderEgresos();
}

function saveCXC() {
    const cliente = document.getElementById('cxcCliente').value;
    const monto = document.getElementById('cxcMonto').value;
    const concepto = document.getElementById('cxcConcepto').value;
    const fechaEmision = document.getElementById('cxcFechaEmision').value;
    const fechaVenc = document.getElementById('cxcFechaVenc').value;
    const estado = document.getElementById('cxcEstado').value;
    const observaciones = document.getElementById('cxcObservaciones').value;

    if (!cliente || !monto || !concepto || !fechaEmision || !fechaVenc || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const cxcItem = {
        cliente,
        monto: parseFloat(monto),
        concepto,
        fechaEmision,
        fechaVenc,
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = cxcData.findIndex(c => c.id === currentItemId);
        cxcData[index] = { ...cxcData[index], ...cxcItem };
        alert('‚úÖ Cuenta por cobrar actualizada correctamente');
    } else {
        const newId = 'CXC' + String(cxcData.length + 1).padStart(3, '0');
        cxcData.push({ id: newId, ...cxcItem });
        alert('‚úÖ Cuenta por cobrar registrada correctamente');
    }

    closeCXCModal();
    renderCXC();
}

function saveCXP() {
    const proveedor = document.getElementById('cxpProveedor').value;
    const monto = document.getElementById('cxpMonto').value;
    const concepto = document.getElementById('cxpConcepto').value;
    const fechaEmision = document.getElementById('cxpFechaEmision').value;
    const fechaVenc = document.getElementById('cxpFechaVenc').value;
    const estado = document.getElementById('cxpEstado').value;
    const observaciones = document.getElementById('cxpObservaciones').value;

    if (!proveedor || !monto || !concepto || !fechaEmision || !fechaVenc || !estado) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    const cxpItem = {
        proveedor,
        monto: parseFloat(monto),
        concepto,
        fechaEmision,
        fechaVenc,
        estado,
        observaciones
    };

    if (currentItemId) {
        const index = cxpData.findIndex(c => c.id === currentItemId);
        cxpData[index] = { ...cxpData[index], ...cxpItem };
        alert('‚úÖ Cuenta por pagar actualizada correctamente');
    } else {
        const newId = 'CXP' + String(cxpData.length + 1).padStart(3, '0');
        cxpData.push({ id: newId, ...cxpItem });
        alert('‚úÖ Cuenta por pagar registrada correctamente');
    }

    closeCXPModal();
    renderCXP();
}

function confirmPago() {
    const fecha = document.getElementById('pagoFecha').value;
    const metodo = document.getElementById('pagoMetodo').value;
    const referencia = document.getElementById('pagoReferencia').value;
    const observaciones = document.getElementById('pagoObservaciones').value;

    if (!fecha || !metodo) {
        alert('‚ö†Ô∏è Por favor completa los campos requeridos');
        return;
    }

    if (currentPagoType === 'cxc') {
        const index = cxcData.findIndex(c => c.id === currentPagoId);
        cxcData[index].estado = 'Pagado';
        cxcData[index].observaciones = `Pagado el ${new Date(fecha).toLocaleDateString('es-ES')} - ${metodo}${referencia ? ' - Ref: ' + referencia : ''}`;
        renderCXC();
    } else if (currentPagoType === 'cxp') {
        const index = cxpData.findIndex(c => c.id === currentPagoId);
        cxpData[index].estado = 'Pagado';
        cxpData[index].observaciones = `Pagado el ${new Date(fecha).toLocaleDateString('es-ES')} - ${metodo}${referencia ? ' - Ref: ' + referencia : ''}`;
        renderCXP();
    }

    alert('‚úÖ Pago registrado correctamente');
    closePagoModal();
}

// ============================================
// EDITAR Y ELIMINAR
// ============================================
function editIngreso(id) {
    const ing = ingresosData.find(i => i.id === id);
    if (!ing) return;

    document.getElementById('modalIngresoTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Ingreso';
    document.getElementById('ingresoFecha').value = ing.fecha;
    document.getElementById('ingresoCategoria').value = ing.categoria;
    document.getElementById('ingresoConcepto').value = ing.concepto;
    document.getElementById('ingresoCliente').value = ing.cliente;
    document.getElementById('ingresoMonto').value = ing.monto;
    document.getElementById('ingresoMetodo').value = ing.metodo;
    document.getElementById('ingresoEstado').value = ing.estado;
    document.getElementById('ingresoObservaciones').value = ing.observaciones || '';

    currentItemId = id;
    openIngresoModal();
}

function deleteIngreso(id) {
    if (confirm('¬øEst√°s seguro de eliminar este ingreso?')) {
        ingresosData = ingresosData.filter(i => i.id !== id);
        renderIngresos();
        alert('‚úÖ Ingreso eliminado correctamente');
    }
}

function editEgreso(id) {
    const egr = egresosData.find(e => e.id === id);
    if (!egr) return;

    document.getElementById('modalEgresoTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Egreso';
    document.getElementById('egresoFecha').value = egr.fecha;
    document.getElementById('egresoCategoria').value = egr.categoria;
    document.getElementById('egresoConcepto').value = egr.concepto;
    document.getElementById('egresoProveedor').value = egr.proveedor;
    document.getElementById('egresoMonto').value = egr.monto;
    document.getElementById('egresoMetodo').value = egr.metodo;
    document.getElementById('egresoEstado').value = egr.estado;
    document.getElementById('egresoObservaciones').value = egr.observaciones || '';

    currentItemId = id;
    openEgresoModal();
}

function deleteEgreso(id) {
    if (confirm('¬øEst√°s seguro de eliminar este egreso?')) {
        egresosData = egresosData.filter(e => e.id !== id);
        renderEgresos();
        alert('‚úÖ Egreso eliminado correctamente');
    }
}

function editCXC(id) {
    const cxc = cxcData.find(c => c.id === id);
    if (!cxc) return;

    document.getElementById('modalCXCTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Cuenta por Cobrar';
    document.getElementById('cxcCliente').value = cxc.cliente;
    document.getElementById('cxcMonto').value = cxc.monto;
    document.getElementById('cxcConcepto').value = cxc.concepto;
    document.getElementById('cxcFechaEmision').value = cxc.fechaEmision;
    document.getElementById('cxcFechaVenc').value = cxc.fechaVenc;
    document.getElementById('cxcEstado').value = cxc.estado;
    document.getElementById('cxcObservaciones').value = cxc.observaciones || '';

    currentItemId = id;
    openCXCModal();
}

function deleteCXC(id) {
    if (confirm('¬øEst√°s seguro de eliminar esta cuenta por cobrar?')) {
        cxcData = cxcData.filter(c => c.id !== id);
        renderCXC();
        alert('‚úÖ Cuenta eliminada correctamente');
    }
}

function editCXP(id) {
    const cxp = cxpData.find(c => c.id === id);
    if (!cxp) return;

    document.getElementById('modalCXPTitle').innerHTML = '<span>‚úèÔ∏è</span> Editar Cuenta por Pagar';
    document.getElementById('cxpProveedor').value = cxp.proveedor;
    document.getElementById('cxpMonto').value = cxp.monto;
    document.getElementById('cxpConcepto').value = cxp.concepto;
    document.getElementById('cxpFechaEmision').value = cxp.fechaEmision;
    document.getElementById('cxpFechaVenc').value = cxp.fechaVenc;
    document.getElementById('cxpEstado').value = cxp.estado;
    document.getElementById('cxpObservaciones').value = cxp.observaciones || '';

    currentItemId = id;
    openCXPModal();
}

function deleteCXP(id) {
    if (confirm('¬øEst√°s seguro de eliminar esta cuenta por pagar?')) {
        cxpData = cxpData.filter(c => c.id !== id);
        renderCXP();
        alert('‚úÖ Cuenta eliminada correctamente');
    }
}

// ============================================
// VER DETALLES
// ============================================
function viewDetails(type, id) {
    let detailsHTML = '';

    if (type === 'ingreso') {
        const ing = ingresosData.find(i => i.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Ingreso</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Fecha</div>
                        <div class="detail-value">${new Date(ing.fecha).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Categor√≠a</div>
                        <div class="detail-value">${ing.categoria}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Cliente</div>
                        <div class="detail-value">${ing.cliente}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Monto</div>
                        <div class="detail-value" style="color: var(--color-success); font-size: 24px; font-weight: 900;">$${ing.monto.toFixed(2)}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">M√©todo de Pago</div>
                        <div class="detail-value">${ing.metodo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${ing.estado.toLowerCase()}">${ing.estado}</span></div>
                    </div>
                    <div class="detail-item" style="grid-column: 1/-1;">
                        <div class="detail-label">Concepto</div>
                        <div class="detail-value">${ing.concepto}</div>
                    </div>
                </div>
                ${ing.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${ing.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'egreso') {
        const egr = egresosData.find(e => e.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Informaci√≥n del Egreso</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Fecha</div>
                        <div class="detail-value">${new Date(egr.fecha).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Categor√≠a</div>
                        <div class="detail-value">${egr.categoria}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Proveedor</div>
                        <div class="detail-value">${egr.proveedor}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Monto</div>
                        <div class="detail-value" style="color: #EF4444; font-size: 24px; font-weight: 900;">$${egr.monto.toFixed(2)}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">M√©todo de Pago</div>
                        <div class="detail-value">${egr.metodo}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${egr.estado.toLowerCase()}">${egr.estado}</span></div>
                    </div>
                    <div class="detail-item" style="grid-column: 1/-1;">
                        <div class="detail-label">Concepto</div>
                        <div class="detail-value">${egr.concepto}</div>
                    </div>
                </div>
                ${egr.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${egr.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'cxc') {
        const cxc = cxcData.find(c => c.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Cuenta por Cobrar</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Cliente</div>
                        <div class="detail-value">${cxc.cliente}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Monto</div>
                        <div class="detail-value" style="color: var(--color-success); font-size: 24px; font-weight: 900;">$${cxc.monto.toFixed(2)}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha Emisi√≥n</div>
                        <div class="detail-value">${new Date(cxc.fechaEmision).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha Vencimiento</div>
                        <div class="detail-value">${new Date(cxc.fechaVenc).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${cxc.estado.toLowerCase()}">${cxc.estado}</span></div>
                    </div>
                    <div class="detail-item" style="grid-column: 1/-1;">
                        <div class="detail-label">Concepto</div>
                        <div class="detail-value">${cxc.concepto}</div>
                    </div>
                </div>
                ${cxc.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${cxc.observaciones}</p>` : ''}
            </div>
        `;
    } else if (type === 'cxp') {
        const cxp = cxpData.find(c => c.id === id);
        detailsHTML = `
            <div class="detail-section">
                <h3 class="detail-section-title">Cuenta por Pagar</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">Proveedor</div>
                        <div class="detail-value">${cxp.proveedor}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Monto</div>
                        <div class="detail-value" style="color: #EF4444; font-size: 24px; font-weight: 900;">$${cxp.monto.toFixed(2)}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha Emisi√≥n</div>
                        <div class="detail-value">${new Date(cxp.fechaEmision).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Fecha Vencimiento</div>
                        <div class="detail-value">${new Date(cxp.fechaVenc).toLocaleDateString('es-ES')}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Estado</div>
                        <div class="detail-value"><span class="badge ${cxp.estado.toLowerCase()}">${cxp.estado}</span></div>
                    </div>
                    <div class="detail-item" style="grid-column: 1/-1;">
                        <div class="detail-label">Concepto</div>
                        <div class="detail-value">${cxp.concepto}</div>
                    </div>
                </div>
                ${cxp.observaciones ? `<p style="margin-top:16px; color:#6B7280;"><strong>Observaciones:</strong> ${cxp.observaciones}</p>` : ''}
            </div>
        `;
    }

    document.getElementById('detailsContent').innerHTML = detailsHTML;
    document.getElementById('modalDetails').classList.add('active');
    document.body.style.overflow = 'hidden';
}

// ============================================
// EVENT LISTENERS
// ============================================
document.getElementById('btnAddIngreso').addEventListener('click', () => {
    document.getElementById('modalIngresoTitle').innerHTML = '<span>üíµ</span> Nuevo Ingreso';
    document.getElementById('ingresoForm').reset();
    document.getElementById('ingresoFecha').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openIngresoModal();
});

document.getElementById('btnAddEgreso').addEventListener('click', () => {
    document.getElementById('modalEgresoTitle').innerHTML = '<span>üí∏</span> Nuevo Egreso';
    document.getElementById('egresoForm').reset();
    document.getElementById('egresoFecha').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openEgresoModal();
});

document.getElementById('btnAddCXC').addEventListener('click', () => {
    document.getElementById('modalCXCTitle').innerHTML = '<span>üì•</span> Nueva Cuenta por Cobrar';
    document.getElementById('cxcForm').reset();
    document.getElementById('cxcFechaEmision').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openCXCModal();
});

document.getElementById('btnAddCXP').addEventListener('click', () => {
    document.getElementById('modalCXPTitle').innerHTML = '<span>üì§</span> Nueva Cuenta por Pagar';
    document.getElementById('cxpForm').reset();
    document.getElementById('cxpFechaEmision').value = new Date().toISOString().split('T')[0];
    currentItemId = null;
    openCXPModal();
});

// Cerrar modales al hacer click fuera
document.querySelectorAll('.modal-overlay').forEach(modal => {
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    });
});

// ============================================
// INICIALIZAR
// ============================================
document.addEventListener('DOMContentLoaded', () => {
    renderIngresos();
});
</script>